{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\src\\\\components\\\\ProfileScreen.js\";\n\nimport React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Loadable from \"react-loadable\";\nimport PropTypes from \"prop-types\";\nimport * as path from \"lodash.get\";\nimport ProfileHeader from \"./ProfileHeader\";\nimport ProfileNavbar from \"./ProfileNavbar\";\nimport LoadingSpinner from \"./LoadingSpinner\";\nimport Log from \"./Log\";\nvar ProfileInfo = Loadable({\n  loader: function loader() {\n    return import(\"./ProfileInfo\");\n  },\n  loading: function loading() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 18\n      }\n    });\n  }\n});\nvar ProfileChildren = Loadable({\n  loader: function loader() {\n    return import(\"./ProfileChildren\");\n  },\n  loading: function loading() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 18\n      }\n    });\n  }\n});\n\nvar getMyChildren = function getMyChildren(userId) {\n  return axios.get(\"/api/users/\".concat(userId, \"/children\")).then(function (response) {\n    return response.data;\n  }).catch(function (error) {\n    Log.error(error);\n    return [];\n  });\n};\n\nvar getMyProfile = function getMyProfile(userId) {\n  return axios.get(\"/api/users/\".concat(userId, \"/profile\")).then(function (response) {\n    return response.data;\n  }).catch(function (error) {\n    Log.error(error);\n    return {\n      given_name: \"\",\n      family_name: \"\",\n      image: {\n        path: \"/images/profiles/user_default_photo.png\"\n      },\n      address: {\n        street: \"\",\n        number: \"\"\n      },\n      email: \"\",\n      phone: \"\",\n      phone_type: \"\",\n      visible: false,\n      user_id: \"\"\n    };\n  });\n};\n\nvar ProfileScreen = /*#__PURE__*/function (_React$Component) {\n  _inherits(ProfileScreen, _React$Component);\n\n  var _super = _createSuper(ProfileScreen);\n\n  function ProfileScreen() {\n    var _this2;\n\n    _classCallCheck(this, ProfileScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _super.call.apply(_super, [this].concat(args));\n    _this2.state = {\n      profile: {},\n      children: [],\n      fetchedProfile: false\n    };\n    return _this2;\n  }\n\n  _createClass(ProfileScreen, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var match, profileId, profile, children;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                match = this.props.match;\n                profileId = match.params.profileId;\n                _context.next = 4;\n                return getMyProfile(profileId);\n\n              case 4:\n                profile = _context.sent;\n                _context.next = 7;\n                return getMyChildren(profileId);\n\n              case 7:\n                children = _context.sent;\n                this.setState({\n                  fetchedProfile: true,\n                  children: children,\n                  profile: profile\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var match = this.props.match;\n      var profileId = match.params.profileId;\n      var _this$state = this.state,\n          fetchedProfile = _this$state.fetchedProfile,\n          children = _this$state.children;\n      var currentPath = match.url;\n      var profile = this.state.profile;\n      return fetchedProfile ? /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ProfileHeader, {\n        name: \"\".concat(profile.given_name, \" \").concat(profile.family_name),\n        photo: path(profile, [\"image\", \"path\"]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ProfileNavbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"\".concat(currentPath, \"/info\"),\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(ProfileInfo, Object.assign({}, props, {\n            profile: profile,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 32\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"\".concat(currentPath, \"/children\"),\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(ProfileChildren, Object.assign({}, props, {\n            profileId: profileId,\n            usersChildren: children,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 17\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }\n      })))) : /*#__PURE__*/React.createElement(LoadingSpinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return ProfileScreen;\n}(React.Component);\n\nProfileScreen.propTypes = {\n  match: PropTypes.object\n};\nexport default ProfileScreen;","map":{"version":3,"sources":["C:/Users/nucle/Documents/GitHub/Families_Share-platform/client/src/components/ProfileScreen.js"],"names":["React","Switch","Route","axios","Loadable","PropTypes","path","ProfileHeader","ProfileNavbar","LoadingSpinner","Log","ProfileInfo","loader","loading","ProfileChildren","getMyChildren","userId","get","then","response","data","catch","error","getMyProfile","given_name","family_name","image","address","street","number","email","phone","phone_type","visible","user_id","ProfileScreen","state","profile","children","fetchedProfile","match","props","profileId","params","setState","currentPath","url","Component","propTypes","object"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Loadable from \"react-loadable\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as path from \"lodash.get\";\r\nimport ProfileHeader from \"./ProfileHeader\";\r\nimport ProfileNavbar from \"./ProfileNavbar\";\r\nimport LoadingSpinner from \"./LoadingSpinner\";\r\nimport Log from \"./Log\";\r\n\r\nconst ProfileInfo = Loadable({\r\n  loader: () => import(\"./ProfileInfo\"),\r\n  loading: () => <div />\r\n});\r\nconst ProfileChildren = Loadable({\r\n  loader: () => import(\"./ProfileChildren\"),\r\n  loading: () => <div />\r\n});\r\n\r\nconst getMyChildren = userId => {\r\n  return axios\r\n    .get(`/api/users/${userId}/children`)\r\n    .then(response => {\r\n      return response.data;\r\n    })\r\n    .catch(error => {\r\n      Log.error(error);\r\n      return [];\r\n    });\r\n};\r\nconst getMyProfile = userId => {\r\n  return axios\r\n    .get(`/api/users/${userId}/profile`)\r\n    .then(response => {\r\n      return response.data;\r\n    })\r\n    .catch(error => {\r\n      Log.error(error);\r\n      return {\r\n        given_name: \"\",\r\n        family_name: \"\",\r\n        image: { path: \"/images/profiles/user_default_photo.png\" },\r\n        address: { street: \"\", number: \"\" },\r\n        email: \"\",\r\n        phone: \"\",\r\n        phone_type: \"\",\r\n        visible: false,\r\n        user_id: \"\"\r\n      };\r\n    });\r\n};\r\n\r\nclass ProfileScreen extends React.Component {\r\n  state = {\r\n    profile: {},\r\n    children: [],\r\n    fetchedProfile: false\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { match } = this.props;\r\n    const { profileId } = match.params;\r\n    const profile = await getMyProfile(profileId);\r\n\r\n    const children = await getMyChildren(profileId);\r\n    this.setState({\r\n      fetchedProfile: true,\r\n      children,\r\n      profile\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { match } = this.props;\r\n    const { profileId } = match.params;\r\n    const { fetchedProfile, children } = this.state;\r\n    const currentPath = match.url;\r\n    const { profile } = this.state;\r\n    return fetchedProfile ? (\r\n      <React.Fragment>\r\n        <ProfileHeader\r\n          name={`${profile.given_name} ${profile.family_name}`}\r\n          photo={path(profile, [\"image\", \"path\"])}\r\n        />\r\n        <React.Fragment>\r\n          <ProfileNavbar />\r\n          <Switch>\r\n            <Route\r\n              exact\r\n              path={`${currentPath}/info`}\r\n              render={props => <ProfileInfo {...props} profile={profile} />}\r\n            />\r\n            <Route\r\n              exact\r\n              path={`${currentPath}/children`}\r\n              render={props => (\r\n                <ProfileChildren\r\n                  {...props}\r\n                  profileId={profileId}\r\n                  usersChildren={children}\r\n                />\r\n              )}\r\n            />\r\n          </Switch>\r\n        </React.Fragment>\r\n      </React.Fragment>\r\n    ) : (\r\n      <LoadingSpinner />\r\n    );\r\n  }\r\n}\r\n\r\nProfileScreen.propTypes = {\r\n  match: PropTypes.object\r\n};\r\n\r\nexport default ProfileScreen;\r\n"]},"metadata":{},"sourceType":"module"}