{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\src\\\\components\\\\EditChildProfileScreen.js\";\nimport React from \"react\";\nimport moment from \"moment\";\nimport * as path from \"lodash.get\";\nimport { HuePicker } from \"react-color\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport withLanguage from \"./LanguageContext\";\nimport Texts from \"../Constants/Texts\";\nimport LoadingSpinner from \"./LoadingSpinner\";\nimport Log from \"./Log\";\n\nvar dataURLtoFile = function dataURLtoFile(dataurl, filename) {\n  var arr = dataurl.split(\",\");\n  var mime = arr[0].match(/:(.*?);/)[1];\n  var bstr = atob(arr[1]);\n  var n = bstr.length;\n  var u8arr = new Uint8Array(n);\n\n  while (n) {\n    n -= 1;\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n\n  return new File([u8arr], filename, {\n    type: mime\n  });\n};\n\nvar EditChildProfileScreen = /*#__PURE__*/function (_React$Component) {\n  _inherits(EditChildProfileScreen, _React$Component);\n\n  var _super = _createSuper(EditChildProfileScreen);\n\n  function EditChildProfileScreen() {\n    var _this;\n\n    _classCallCheck(this, EditChildProfileScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      fetchedChildData: false,\n      month: moment().month() + 1,\n      year: moment().year()\n    };\n\n    _this.handleMessage = function (event) {\n      var data = JSON.parse(event.data);\n\n      if (data.action === \"fileUpload\") {\n        var image = \"data:image/png;base64, \".concat(data.value);\n\n        _this.setState({\n          image: {\n            path: image\n          },\n          file: dataURLtoFile(image, \"photo.png\")\n        });\n      }\n    };\n\n    _this.handleCancel = function () {\n      var history = _this.props.history;\n      history.goBack();\n    };\n\n    _this.handleChange = function (event) {\n      var name = event.target.name;\n      var value = event.target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.validate = function () {\n      var language = _this.props.language;\n      var texts = Texts[language].editChildProfileScreen;\n      var formLength = _this.formEl.length;\n\n      if (_this.formEl.checkValidity() === false) {\n        for (var i = 0; i < formLength; i += 1) {\n          var elem = _this.formEl[i];\n          var errorLabel = document.getElementById(\"\".concat(elem.name, \"Err\"));\n\n          if (errorLabel && elem.nodeName.toLowerCase() !== \"button\") {\n            if (!elem.validity.valid) {\n              if (elem.validity.valueMissing) {\n                errorLabel.textContent = texts.requiredErr;\n              }\n            } else {\n              errorLabel.textContent = \"\";\n            }\n          }\n        }\n\n        return false;\n      }\n\n      for (var _i = 0; _i < formLength; _i += 1) {\n        var _elem = _this.formEl[_i];\n\n        var _errorLabel = document.getElementById(\"\".concat(_elem.name, \"Err\"));\n\n        if (_errorLabel && _elem.nodeName.toLowerCase() !== \"button\") {\n          _errorLabel.textContent = \"\";\n        }\n      }\n\n      return true;\n    };\n\n    _this.handleAdd = function (event) {\n      var history = _this.props.history;\n      var pathname = history.location.pathname;\n      event.preventDefault();\n      history.push({\n        pathname: \"\".concat(pathname, \"/additional\"),\n        state: _objectSpread(_objectSpread({}, _this.state), {}, {\n          editChild: true\n        })\n      });\n      return false;\n    };\n\n    _this.handleColorChange = function (color) {\n      _this.setState({\n        background: color.hex\n      });\n    };\n\n    _this.submitChanges = function () {\n      var _this$props = _this.props,\n          match = _this$props.match,\n          history = _this$props.history;\n      var _match$params = match.params,\n          userId = _match$params.profileId,\n          childId = _match$params.childId;\n      var _this$state = _this.state,\n          year = _this$state.year,\n          month = _this$state.month,\n          date = _this$state.date,\n          file = _this$state.file,\n          family_name = _this$state.family_name,\n          given_name = _this$state.given_name,\n          background = _this$state.background,\n          other_info = _this$state.other_info,\n          gender = _this$state.gender,\n          special_needs = _this$state.special_needs,\n          allergies = _this$state.allergies;\n      var bodyFormData = new FormData();\n      var birthdate = moment().set({\n        year: year,\n        month: month,\n        date: date\n      });\n\n      if (file !== undefined) {\n        bodyFormData.append(\"photo\", file);\n      }\n\n      bodyFormData.append(\"given_name\", given_name);\n      bodyFormData.append(\"family_name\", family_name);\n      bodyFormData.append(\"gender\", gender);\n      bodyFormData.append(\"background\", background);\n      bodyFormData.append(\"other_info\", other_info);\n      bodyFormData.append(\"special_needs\", special_needs);\n      bodyFormData.append(\"allergies\", allergies);\n      bodyFormData.append(\"birthdate\", birthdate);\n      axios.patch(\"/api/users/\".concat(userId, \"/children/\").concat(childId), bodyFormData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(function (response) {\n        Log.info(response);\n        history.goBack();\n      }).catch(function (error) {\n        Log.error(error);\n        history.goBack();\n      });\n    };\n\n    _this.handleSave = function (event) {\n      event.preventDefault();\n\n      if (_this.validate()) {\n        _this.submitChanges();\n      }\n\n      _this.setState({\n        formIsValidated: true\n      });\n    };\n\n    _this.handleImageChange = function (event) {\n      if (event.target.files && event.target.files[0]) {\n        var reader = new FileReader();\n        var file = event.target.files[0];\n\n        reader.onload = function (e) {\n          _this.setState({\n            image: {\n              path: e.target.result\n            },\n            file: file\n          });\n        };\n\n        reader.readAsDataURL(event.target.files[0]);\n      }\n    };\n\n    _this.handleNativeImageChange = function () {\n      window.ReactNativeWebView.postMessage(JSON.stringify({\n        action: \"fileUpload\"\n      }));\n    };\n\n    return _this;\n  }\n\n  _createClass(EditChildProfileScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var history = this.props.history;\n      var state = history.location.state;\n      document.addEventListener(\"message\", this.handleMessage, false);\n\n      if (state !== undefined) {\n        this.setState(_objectSpread({}, state));\n      } else {\n        var match = this.props.match;\n        var _match$params2 = match.params,\n            userId = _match$params2.profileId,\n            childId = _match$params2.childId;\n        axios.get(\"/api/users/\".concat(userId, \"/children/\").concat(childId)).then(function (response) {\n          var child = response.data;\n          child.date = new Date(child.birthdate).getDate();\n          child.year = new Date(child.birthdate).getFullYear();\n          child.month = new Date(child.birthdate).getMonth() + 1;\n          delete child.birthdate;\n\n          _this2.setState(_objectSpread({\n            fetchedChildData: true\n          }, child));\n        }).catch(function (error) {\n          Log.error(error);\n\n          _this2.setState({\n            fetchedChildData: true,\n            child_id: childId,\n            image: {\n              path: \"\"\n            },\n            background: \"\",\n            given_name: \"\",\n            family_name: \"\",\n            date: 1,\n            year: 2001,\n            month: 1,\n            gender: \"unspecified\",\n            allergies: \"\",\n            other_info: \"\",\n            special_needs: \"\"\n          });\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"message\", this.handleMessage, false);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          language = _this$props2.language,\n          history = _this$props2.history;\n      var _this$state2 = this.state,\n          month = _this$state2.month,\n          year = _this$state2.year,\n          date = _this$state2.date,\n          gender = _this$state2.gender,\n          formIsValidated = _this$state2.formIsValidated,\n          fetchedChildData = _this$state2.fetchedChildData,\n          image = _this$state2.image,\n          given_name = _this$state2.given_name,\n          family_name = _this$state2.family_name,\n          background = _this$state2.background;\n      var texts = Texts[language].editChildProfileScreen;\n      var formClass = [];\n\n      var dates = _toConsumableArray(Array(moment().month(month - 1).year(year).daysInMonth()).keys()).map(function (x) {\n        return x + 1;\n      });\n\n      var months = _toConsumableArray(Array(12).keys()).map(function (x) {\n        return x + 1;\n      });\n\n      var years = _toConsumableArray(Array(18).keys()).map(function (x) {\n        return x + (moment().year() - 17);\n      });\n\n      if (formIsValidated) {\n        formClass.push(\"was-validated\");\n      }\n\n      return fetchedChildData ? /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"editChildProfileHeaderContainer\",\n        style: {\n          backgroundColor: background\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        id: \"profileHeaderOptions\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton center\",\n        onClick: function onClick() {\n          return history.goBack();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-times\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-6-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"verticalCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 15\n        }\n      }, texts.backNavTitle)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton center\",\n        onClick: this.handleSave,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(\"img\", {\n        src: path(image, [\"path\"]),\n        alt: \"child profile logo\",\n        className: \"horizontalCenter profilePhoto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"editChildProfileInfoContainer\",\n        className: \"horizontalCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        ref: function ref(form) {\n          _this3.formEl = form;\n        },\n        onSubmit: this.handleSave,\n        className: formClass,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-5-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fullInput editChildProfileInputField center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 19\n        }\n      }, texts.name), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        name: \"given_name\",\n        className: \"form-control\",\n        onChange: this.handleChange,\n        required: true,\n        value: given_name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"invalid-feedback\",\n        id: \"given_nameErr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 19\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-5-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fullInput editChildProfileInputField center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"surname\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 19\n        }\n      }, texts.surname), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        name: \"family_name\",\n        className: \"form-control\",\n        onChange: this.handleChange,\n        required: true,\n        value: family_name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"invalid-feedback\",\n        id: \"family_nameErr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 19\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-1-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fullInput editChildProfileInputField center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 19\n        }\n      }, texts.date), /*#__PURE__*/React.createElement(\"select\", {\n        value: date,\n        onChange: this.handleChange,\n        name: \"date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 19\n        }\n      }, dates.map(function (d) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: d,\n          value: d,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 23\n          }\n        }, d);\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-1-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fullInput editChildProfileInputField center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"month\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 19\n        }\n      }, texts.month), /*#__PURE__*/React.createElement(\"select\", {\n        value: month,\n        onChange: this.handleChange,\n        name: \"month\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 19\n        }\n      }, months.map(function (m) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: m,\n          value: m,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 23\n          }\n        }, m);\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-1-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fullInput editChildProfileInputField center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"year\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 19\n        }\n      }, texts.year), /*#__PURE__*/React.createElement(\"select\", {\n        value: year,\n        onChange: this.handleChange,\n        name: \"year\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 19\n        }\n      }, years.map(function (y) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: y,\n          value: y,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 23\n          }\n        }, y);\n      }))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-10-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fullInput editChildProfileInputField center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"gender\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 19\n        }\n      }, texts.gender), /*#__PURE__*/React.createElement(\"select\", {\n        value: gender,\n        onChange: this.handleChange,\n        name: \"gender\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"boy\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 21\n        }\n      }, texts.boy), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"girl\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 21\n        }\n      }, texts.girl), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"unspecified\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 21\n        }\n      }, texts.unspecified))))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"additionalInformationContainer\",\n        className: \"row no-gutters\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-7-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 19\n        }\n      }, texts.additional), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 19\n        }\n      }, texts.example))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"center\",\n        type: \"button\",\n        onClick: this.handleAdd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 17\n        }\n      }, texts.add))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-camera center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"uploadGroupLogoContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"horizontalCenter \",\n        htmlFor: \"uploadLogoInput\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 19\n        }\n      }, texts.file), window.isNative ? /*#__PURE__*/React.createElement(\"input\", {\n        id: \"uploadLogoInput\",\n        className: \"editChildProfileInput\",\n        type: \"button\",\n        accept: \"image/*\",\n        name: \"logo\",\n        onClick: this.handleNativeImageChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 21\n        }\n      }) : /*#__PURE__*/React.createElement(\"input\", {\n        id: \"uploadLogoInput\",\n        className: \"editChildProfileInput\",\n        type: \"file\",\n        accept: \"image/*\",\n        name: \"logo\",\n        onChange: this.handleImageChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 21\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-fill-drip center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(HuePicker, {\n        width: \"90%\",\n        className: \"verticalCenter\",\n        color: background,\n        onChange: this.handleColorChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 17\n        }\n      })))))) : /*#__PURE__*/React.createElement(LoadingSpinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return EditChildProfileScreen;\n}(React.Component);\n\nexport default withLanguage(EditChildProfileScreen);\nEditChildProfileScreen.propTypes = {\n  language: PropTypes.string,\n  history: PropTypes.object,\n  match: PropTypes.object\n};","map":{"version":3,"sources":["C:/Users/nucle/Documents/GitHub/Green-Wizards/client/src/components/EditChildProfileScreen.js"],"names":["React","moment","path","HuePicker","axios","PropTypes","withLanguage","Texts","LoadingSpinner","Log","dataURLtoFile","dataurl","filename","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","File","type","EditChildProfileScreen","state","fetchedChildData","month","year","handleMessage","event","data","JSON","parse","action","image","value","setState","file","handleCancel","history","props","goBack","handleChange","name","target","validate","language","texts","editChildProfileScreen","formLength","formEl","checkValidity","i","elem","errorLabel","document","getElementById","nodeName","toLowerCase","validity","valid","valueMissing","textContent","requiredErr","handleAdd","pathname","location","preventDefault","push","editChild","handleColorChange","color","background","hex","submitChanges","params","userId","profileId","childId","date","family_name","given_name","other_info","gender","special_needs","allergies","bodyFormData","FormData","birthdate","set","undefined","append","patch","headers","then","response","info","catch","error","handleSave","formIsValidated","handleImageChange","files","reader","FileReader","onload","e","result","readAsDataURL","handleNativeImageChange","window","ReactNativeWebView","postMessage","stringify","addEventListener","get","child","Date","getDate","getFullYear","getMonth","child_id","removeEventListener","formClass","dates","Array","daysInMonth","keys","map","x","months","years","backgroundColor","backNavTitle","form","surname","d","m","y","boy","girl","unspecified","additional","example","add","isNative","Component","propTypes","string","object"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport moment from \"moment\";\r\nimport * as path from \"lodash.get\";\r\nimport { HuePicker } from \"react-color\";\r\nimport axios from \"axios\";\r\nimport PropTypes from \"prop-types\";\r\nimport withLanguage from \"./LanguageContext\";\r\nimport Texts from \"../Constants/Texts\";\r\nimport LoadingSpinner from \"./LoadingSpinner\";\r\nimport Log from \"./Log\";\r\n\r\nconst dataURLtoFile = (dataurl, filename) => {\r\n  const arr = dataurl.split(\",\");\r\n\r\n  const mime = arr[0].match(/:(.*?);/)[1];\r\n\r\n  const bstr = atob(arr[1]);\r\n\r\n  let n = bstr.length;\r\n\r\n  const u8arr = new Uint8Array(n);\r\n  while (n) {\r\n    n -= 1;\r\n    u8arr[n] = bstr.charCodeAt(n);\r\n  }\r\n  return new File([u8arr], filename, { type: mime });\r\n};\r\n\r\nclass EditChildProfileScreen extends React.Component {\r\n  state = {\r\n    fetchedChildData: false,\r\n    month: moment().month() + 1,\r\n    year: moment().year()\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { history } = this.props;\r\n    const { state } = history.location;\r\n    document.addEventListener(\"message\", this.handleMessage, false);\r\n    if (state !== undefined) {\r\n      this.setState({ ...state });\r\n    } else {\r\n      const { match } = this.props;\r\n      const { profileId: userId, childId } = match.params;\r\n      axios\r\n        .get(`/api/users/${userId}/children/${childId}`)\r\n        .then(response => {\r\n          const child = response.data;\r\n          child.date = new Date(child.birthdate).getDate();\r\n          child.year = new Date(child.birthdate).getFullYear();\r\n          child.month = new Date(child.birthdate).getMonth() + 1;\r\n          delete child.birthdate;\r\n          this.setState({ fetchedChildData: true, ...child });\r\n        })\r\n        .catch(error => {\r\n          Log.error(error);\r\n          this.setState({\r\n            fetchedChildData: true,\r\n            child_id: childId,\r\n            image: { path: \"\" },\r\n            background: \"\",\r\n            given_name: \"\",\r\n            family_name: \"\",\r\n            date: 1,\r\n            year: 2001,\r\n            month: 1,\r\n            gender: \"unspecified\",\r\n            allergies: \"\",\r\n            other_info: \"\",\r\n            special_needs: \"\"\r\n          });\r\n        });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"message\", this.handleMessage, false);\r\n  }\r\n\r\n  handleMessage = event => {\r\n    const data = JSON.parse(event.data);\r\n    if (data.action === \"fileUpload\") {\r\n      const image = `data:image/png;base64, ${data.value}`;\r\n      this.setState({\r\n        image: { path: image },\r\n        file: dataURLtoFile(image, \"photo.png\")\r\n      });\r\n    }\r\n  };\r\n\r\n  handleCancel = () => {\r\n    const { history } = this.props;\r\n    history.goBack();\r\n  };\r\n\r\n  handleChange = event => {\r\n    const { name } = event.target;\r\n    const { value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  validate = () => {\r\n    const { language } = this.props;\r\n    const texts = Texts[language].editChildProfileScreen;\r\n    const formLength = this.formEl.length;\r\n    if (this.formEl.checkValidity() === false) {\r\n      for (let i = 0; i < formLength; i += 1) {\r\n        const elem = this.formEl[i];\r\n        const errorLabel = document.getElementById(`${elem.name}Err`);\r\n        if (errorLabel && elem.nodeName.toLowerCase() !== \"button\") {\r\n          if (!elem.validity.valid) {\r\n            if (elem.validity.valueMissing) {\r\n              errorLabel.textContent = texts.requiredErr;\r\n            }\r\n          } else {\r\n            errorLabel.textContent = \"\";\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    for (let i = 0; i < formLength; i += 1) {\r\n      const elem = this.formEl[i];\r\n      const errorLabel = document.getElementById(`${elem.name}Err`);\r\n      if (errorLabel && elem.nodeName.toLowerCase() !== \"button\") {\r\n        errorLabel.textContent = \"\";\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  handleAdd = event => {\r\n    const { history } = this.props;\r\n    const { pathname } = history.location;\r\n    event.preventDefault();\r\n    history.push({\r\n      pathname: `${pathname}/additional`,\r\n      state: {\r\n        ...this.state,\r\n        editChild: true\r\n      }\r\n    });\r\n    return false;\r\n  };\r\n\r\n  handleColorChange = color => {\r\n    this.setState({ background: color.hex });\r\n  };\r\n\r\n  submitChanges = () => {\r\n    const { match, history } = this.props;\r\n    const { profileId: userId, childId } = match.params;\r\n    const {\r\n      year,\r\n      month,\r\n      date,\r\n      file,\r\n      family_name,\r\n      given_name,\r\n      background,\r\n      other_info,\r\n      gender,\r\n      special_needs,\r\n      allergies\r\n    } = this.state;\r\n    const bodyFormData = new FormData();\r\n    const birthdate = moment().set({\r\n      year,\r\n      month,\r\n      date\r\n    });\r\n    if (file !== undefined) {\r\n      bodyFormData.append(\"photo\", file);\r\n    }\r\n    bodyFormData.append(\"given_name\", given_name);\r\n    bodyFormData.append(\"family_name\", family_name);\r\n    bodyFormData.append(\"gender\", gender);\r\n    bodyFormData.append(\"background\", background);\r\n    bodyFormData.append(\"other_info\", other_info);\r\n    bodyFormData.append(\"special_needs\", special_needs);\r\n    bodyFormData.append(\"allergies\", allergies);\r\n    bodyFormData.append(\"birthdate\", birthdate);\r\n    axios\r\n      .patch(`/api/users/${userId}/children/${childId}`, bodyFormData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\"\r\n        }\r\n      })\r\n      .then(response => {\r\n        Log.info(response);\r\n        history.goBack();\r\n      })\r\n      .catch(error => {\r\n        Log.error(error);\r\n        history.goBack();\r\n      });\r\n  };\r\n\r\n  handleSave = event => {\r\n    event.preventDefault();\r\n    if (this.validate()) {\r\n      this.submitChanges();\r\n    }\r\n    this.setState({ formIsValidated: true });\r\n  };\r\n\r\n  handleImageChange = event => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      const reader = new FileReader();\r\n      const file = event.target.files[0];\r\n      reader.onload = e => {\r\n        this.setState({ image: { path: e.target.result }, file });\r\n      };\r\n      reader.readAsDataURL(event.target.files[0]);\r\n    }\r\n  };\r\n\r\n  handleNativeImageChange = () => {\r\n    window.ReactNativeWebView.postMessage(\r\n      JSON.stringify({ action: \"fileUpload\" })\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { language, history } = this.props;\r\n    const {\r\n      month,\r\n      year,\r\n      date,\r\n      gender,\r\n      formIsValidated,\r\n      fetchedChildData,\r\n      image,\r\n      given_name,\r\n      family_name,\r\n      background\r\n    } = this.state;\r\n    const texts = Texts[language].editChildProfileScreen;\r\n    const formClass = [];\r\n    const dates = [\r\n      ...Array(\r\n        moment()\r\n          .month(month - 1)\r\n          .year(year)\r\n          .daysInMonth()\r\n      ).keys()\r\n    ].map(x => x + 1);\r\n    const months = [...Array(12).keys()].map(x => x + 1);\r\n    const years = [...Array(18).keys()].map(x => x + (moment().year() - 17));\r\n    if (formIsValidated) {\r\n      formClass.push(\"was-validated\");\r\n    }\r\n    return fetchedChildData ? (\r\n      <React.Fragment>\r\n        <div\r\n          id=\"editChildProfileHeaderContainer\"\r\n          style={{ backgroundColor: background }}\r\n        >\r\n          <div className=\"row no-gutters\" id=\"profileHeaderOptions\">\r\n            <div className=\"col-2-10\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"transparentButton center\"\r\n                onClick={() => history.goBack()}\r\n              >\r\n                <i className=\"fas fa-times\" />\r\n              </button>\r\n            </div>\r\n            <div className=\"col-6-10\">\r\n              <h1 className=\"verticalCenter\">{texts.backNavTitle}</h1>\r\n            </div>\r\n            <div className=\"col-2-10\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"transparentButton center\"\r\n                onClick={this.handleSave}\r\n              >\r\n                <i className=\"fas fa-check\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <img\r\n            src={path(image, [\"path\"])}\r\n            alt=\"child profile logo\"\r\n            className=\"horizontalCenter profilePhoto\"\r\n          />\r\n        </div>\r\n        <div id=\"editChildProfileInfoContainer\" className=\"horizontalCenter\">\r\n          <form\r\n            ref={form => {\r\n              this.formEl = form;\r\n            }}\r\n            onSubmit={this.handleSave}\r\n            className={formClass}\r\n            noValidate\r\n          >\r\n            <div className=\"row no-gutters\">\r\n              <div className=\"col-5-10\">\r\n                <div className=\"fullInput editChildProfileInputField center\">\r\n                  <label htmlFor=\"name\">{texts.name}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"given_name\"\r\n                    className=\"form-control\"\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    value={given_name}\r\n                  />\r\n                  <span className=\"invalid-feedback\" id=\"given_nameErr\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"col-5-10\">\r\n                <div className=\"fullInput editChildProfileInputField center\">\r\n                  <label htmlFor=\"surname\">{texts.surname}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"family_name\"\r\n                    className=\"form-control\"\r\n                    onChange={this.handleChange}\r\n                    required\r\n                    value={family_name}\r\n                  />\r\n                  <span className=\"invalid-feedback\" id=\"family_nameErr\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row no-gutters\">\r\n              <div className=\"col-1-3\">\r\n                <div className=\"fullInput editChildProfileInputField center\">\r\n                  <label htmlFor=\"date\">{texts.date}</label>\r\n                  <select value={date} onChange={this.handleChange} name=\"date\">\r\n                    {dates.map(d => (\r\n                      <option key={d} value={d}>\r\n                        {d}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-1-3\">\r\n                <div className=\"fullInput editChildProfileInputField center\">\r\n                  <label htmlFor=\"month\">{texts.month}</label>\r\n                  <select\r\n                    value={month}\r\n                    onChange={this.handleChange}\r\n                    name=\"month\"\r\n                  >\r\n                    {months.map(m => (\r\n                      <option key={m} value={m}>\r\n                        {m}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-1-3\">\r\n                <div className=\"fullInput editChildProfileInputField center\">\r\n                  <label htmlFor=\"year\">{texts.year}</label>\r\n                  <select value={year} onChange={this.handleChange} name=\"year\">\r\n                    {years.map(y => (\r\n                      <option key={y} value={y}>\r\n                        {y}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row no-gutters\">\r\n              <div className=\"col-10-10\">\r\n                <div className=\"fullInput editChildProfileInputField center\">\r\n                  <label htmlFor=\"gender\">{texts.gender}</label>\r\n                  <select\r\n                    value={gender}\r\n                    onChange={this.handleChange}\r\n                    name=\"gender\"\r\n                  >\r\n                    <option value=\"boy\">{texts.boy}</option>\r\n                    <option value=\"girl\">{texts.girl}</option>\r\n                    <option value=\"unspecified\">{texts.unspecified}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div id=\"additionalInformationContainer\" className=\"row no-gutters\">\r\n              <div className=\"col-7-10\">\r\n                <div className=\"center\">\r\n                  <h1>{texts.additional}</h1>\r\n                  <h2>{texts.example}</h2>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-3-10\">\r\n                <button\r\n                  className=\"center\"\r\n                  type=\"button\"\r\n                  onClick={this.handleAdd}\r\n                >\r\n                  {texts.add}\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"row no-gutters\">\r\n              <div className=\"col-2-10\">\r\n                <i className=\"fas fa-camera center\" />\r\n              </div>\r\n              <div className=\"col-3-10\">\r\n                <div id=\"uploadGroupLogoContainer\">\r\n                  <label\r\n                    className=\"horizontalCenter \"\r\n                    htmlFor=\"uploadLogoInput\"\r\n                  >\r\n                    {texts.file}\r\n                  </label>\r\n                  {window.isNative ? (\r\n                    <input\r\n                      id=\"uploadLogoInput\"\r\n                      className=\"editChildProfileInput\"\r\n                      type=\"button\"\r\n                      accept=\"image/*\"\r\n                      name=\"logo\"\r\n                      onClick={this.handleNativeImageChange}\r\n                    />\r\n                  ) : (\r\n                    <input\r\n                      id=\"uploadLogoInput\"\r\n                      className=\"editChildProfileInput\"\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      name=\"logo\"\r\n                      onChange={this.handleImageChange}\r\n                    />\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"col-2-10\">\r\n                <i className=\"fas fa-fill-drip center\" />\r\n              </div>\r\n              <div className=\"col-3-10\">\r\n                <HuePicker\r\n                  width=\"90%\"\r\n                  className=\"verticalCenter\"\r\n                  color={background}\r\n                  onChange={this.handleColorChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </React.Fragment>\r\n    ) : (\r\n      <LoadingSpinner />\r\n    );\r\n  }\r\n}\r\n\r\nexport default withLanguage(EditChildProfileScreen);\r\n\r\nEditChildProfileScreen.propTypes = {\r\n  language: PropTypes.string,\r\n  history: PropTypes.object,\r\n  match: PropTypes.object\r\n};\r\n"]},"metadata":{},"sourceType":"module"}