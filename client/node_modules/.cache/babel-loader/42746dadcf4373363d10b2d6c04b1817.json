{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\src\\\\components\\\\CreatePlanStepper.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles, MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport StepContent from \"@material-ui/core/StepContent\";\nimport Button from \"@material-ui/core/Button\";\nimport autosize from \"autosize\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport LoadingSpinner from \"./LoadingSpinner\";\nimport Texts from \"../Constants/Texts\";\nimport withLanguage from \"./LanguageContext\";\nimport Log from \"./Log\";\nvar muiTheme = createMuiTheme({\n  typography: {\n    useNextVariants: true\n  },\n  overrides: {\n    MuiStepLabel: {\n      label: {\n        fontFamily: \"Roboto\",\n        fontSize: \"1.56rem\"\n      }\n    },\n    MuiStepIcon: {\n      root: {\n        display: \"block\",\n        width: \"3rem\",\n        height: \"3rem\",\n        \"&$active\": {\n          color: \"#00838f\"\n        },\n        \"&$completed\": {\n          color: \"#00838f\"\n        }\n      }\n    },\n    MuiButton: {\n      root: {\n        fontSize: \"1.4rem\",\n        fontFamily: \"Roboto\"\n      }\n    }\n  },\n  palette: {\n    secondary: {\n      main: \"#c43e00\"\n    }\n  }\n});\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      width: \"95%\"\n    },\n    continueButton: {\n      backgroundColor: \"#00838f\",\n      marginTop: theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n      \"&:hover\": {\n        backgroundColor: \"#00838f\"\n      }\n    },\n    stepLabel: {\n      root: {\n        color: \"#ffffff\",\n        \"&$active\": {\n          color: \"white\",\n          fontWeight: 500\n        },\n        \"&$completed\": {\n          color: theme.palette.text.primary,\n          fontWeight: 500\n        },\n        \"&$alternativeLabel\": {\n          textAlign: \"center\",\n          marginTop: 16,\n          fontSize: \"5rem\"\n        },\n        \"&$error\": {\n          color: theme.palette.error.main\n        }\n      }\n    },\n    cancelButton: {\n      backgroundColor: \"#ffffff\",\n      marginTop: theme.spacing.unit,\n      color: \"grey\",\n      marginRight: theme.spacing.unit\n    },\n    actionsContainer: {\n      marginBottom: theme.spacing.unit * 2\n    },\n    resetContainer: {\n      padding: theme.spacing.unit * 3\n    }\n  };\n};\n\nvar CreatePlanStepper = /*#__PURE__*/function (_React$Component) {\n  _inherits(CreatePlanStepper, _React$Component);\n\n  var _super = _createSuper(CreatePlanStepper);\n\n  function CreatePlanStepper() {\n    var _this;\n\n    _classCallCheck(this, CreatePlanStepper);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      activeStep: 0,\n      formIsValidated: false,\n      name: \"\",\n      description: \"\",\n      location: \"\",\n      creatingPlan: false,\n      from: \"\",\n      to: \"\",\n      deadline: \"\"\n    };\n\n    _this.handleMessage = function (event) {\n      var activeStep = _this.state.activeStep;\n      var history = _this.props.history;\n      var data = JSON.parse(event.data);\n\n      if (data.action === \"stepperGoBack\") {\n        if (activeStep - 1 >= 0) {\n          _this.setState({\n            activeStep: activeStep - 1\n          });\n        } else {\n          history.goBack();\n        }\n      }\n    };\n\n    _this.createPlan = function () {\n      var _this$props = _this.props,\n          history = _this$props.history,\n          match = _this$props.match;\n      var groupId = match.params.groupId;\n\n      _this.setState({\n        creatingPlan: true\n      });\n\n      var _this$state = _this.state,\n          description = _this$state.description,\n          name = _this$state.name,\n          location = _this$state.location,\n          from = _this$state.from,\n          to = _this$state.to,\n          deadline = _this$state.deadline;\n      axios.post(\"/api/groups/\".concat(groupId, \"/plans\"), {\n        name: name,\n        description: description,\n        location: location,\n        from: from,\n        to: to,\n        deadline: deadline\n      }).then(function (response) {\n        Log.info(response);\n        history.goBack();\n      }).catch(function (error) {\n        Log.error(error);\n      });\n    };\n\n    _this.handleContinue = function () {\n      var activeStep = _this.state.activeStep;\n\n      if (_this.validate()) {\n        if (activeStep === 3) {\n          _this.createPlan();\n        }\n\n        _this.setState(function (state) {\n          return {\n            activeStep: state.activeStep + 1,\n            formIsValidated: false\n          };\n        });\n      } else {\n        _this.setState({\n          formIsValidated: true\n        });\n      }\n    };\n\n    _this.handleCancel = function () {\n      _this.setState(function (state) {\n        return {\n          activeStep: state.activeStep - 1\n        };\n      });\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      var language = _this.props.language;\n      var from = _this.state.from;\n\n      if (name === \"to\") {\n        if (new Date(from) - new Date(value) > 0) {\n          event.target.setCustomValidity(Texts[language].createPlanStepper.rangeErr);\n        } else {\n          event.target.setCustomValidity(\"\");\n        }\n      } else if (name === \"deadline\") {\n        if (new Date(value) - new Date(from) > 0) {\n          event.target.setCustomValidity(Texts[language].createPlanStepper.deadlineErr);\n        } else {\n          event.target.setCustomValidity(\"\");\n        }\n      } else {\n        event.target.setCustomValidity(\"\");\n      }\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.validate = function () {\n      var language = _this.props.language;\n      var texts = Texts[language].createPlanStepper;\n\n      if (_this.formEl.checkValidity() === false) {\n        for (var i = 0; i < _this.formEl.length; i += 1) {\n          var elem = _this.formEl[i];\n          var errorLabel = document.getElementById(\"\".concat(elem.name, \"Err\"));\n\n          if (errorLabel && elem.nodeName.toLowerCase() !== \"button\") {\n            if (!elem.validity.valid) {\n              if (elem.validity.valueMissing) {\n                errorLabel.textContent = texts.requiredErr;\n              } else if (elem.validity.customError) {\n                if (elem.name === \"deadline\") {\n                  errorLabel.textContent = texts.deadlineErr;\n                } else {\n                  errorLabel.textContent = texts.rangeErr;\n                }\n              }\n            } else {\n              errorLabel.textContent = \"\";\n            }\n          }\n        }\n\n        return false;\n      }\n\n      for (var _i = 0; _i < _this.formEl.length; _i += 1) {\n        var _elem = _this.formEl[_i];\n\n        var _errorLabel = document.getElementById(\"\".concat(_elem.name, \"Err\"));\n\n        if (_errorLabel && _elem.nodeName.toLowerCase() !== \"button\") {\n          _errorLabel.textContent = \"\";\n        }\n      }\n\n      return true;\n    };\n\n    _this.getStepContent = function () {\n      var language = _this.props.language;\n      var _this$state2 = _this.state,\n          activeStep = _this$state2.activeStep,\n          name = _this$state2.name,\n          location = _this$state2.location,\n          description = _this$state2.description,\n          from = _this$state2.from,\n          to = _this$state2.to,\n          deadline = _this$state2.deadline;\n      var texts = Texts[language].createPlanStepper;\n\n      switch (activeStep) {\n        case 0:\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            className: \"createGroupInput form-control\",\n            placeholder: texts.name,\n            onChange: _this.handleChange,\n            required: true,\n            value: name,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"invalid-feedback\",\n            id: \"nameErr\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(\"textarea\", {\n            rows: \"1\",\n            name: \"description\",\n            className: \"textareaInput form-control\",\n            placeholder: texts.description,\n            value: description,\n            onChange: function onChange(event) {\n              _this.handleChange(event);\n\n              autosize(document.querySelectorAll(\"textarea\"));\n            },\n            required: true,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"invalid-feedback\",\n            id: \"descriptionErr\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 13\n            }\n          }));\n\n        case 1:\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"input\", {\n            className: \"createPlanDateInput form-control\",\n            type: \"date\",\n            onChange: _this.handleChange,\n            value: from,\n            required: true,\n            min: moment().format(\"YYYY-MM-DD\"),\n            name: \"from\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"invalid-feedback\",\n            id: \"fromErr\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(\"input\", {\n            className: \"createPlanDateInput form-control\",\n            type: \"date\",\n            onChange: _this.handleChange,\n            value: to,\n            min: moment(from).format(\"YYYY-MM-DD\"),\n            required: true,\n            name: \"to\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"invalid-feedback\",\n            id: \"toErr\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 13\n            }\n          }));\n\n        case 2:\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"input\", {\n            className: \"createPlanDateInput form-control\",\n            type: \"date\",\n            onChange: _this.handleChange,\n            value: deadline,\n            required: true,\n            name: \"deadline\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"invalid-feedback\",\n            id: \"deadlineErr\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 13\n            }\n          }));\n\n        case 3:\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"input\", {\n            type: \"text\",\n            name: \"location\",\n            className: \"createGroupInput form-control\",\n            placeholder: texts.location,\n            onChange: _this.handleChange,\n            required: true,\n            value: location,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 13\n            }\n          }), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"invalid-feedback\",\n            id: \"locationErr\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 13\n            }\n          }));\n\n        default:\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 16\n            }\n          }, \"Lorem Ipsum\");\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(CreatePlanStepper, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener(\"message\", this.handleMessage, false);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"message\", this.handleMessage, false);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          classes = _this$props2.classes,\n          language = _this$props2.language;\n      var texts = Texts[language].createPlanStepper;\n      var steps = texts.stepLabels;\n      var _this$state3 = this.state,\n          activeStep = _this$state3.activeStep,\n          formIsValidated = _this$state3.formIsValidated,\n          creatingPlan = _this$state3.creatingPlan;\n      var formClass = [];\n\n      if (formIsValidated) {\n        formClass.push(\"was-validated\");\n      } else {\n        formClass.pop();\n      }\n\n      return !creatingPlan ? /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.root,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        ref: function ref(form) {\n          _this2.formEl = form;\n        },\n        onSubmit: function onSubmit(event) {\n          return event.preventDefault();\n        },\n        className: formClass,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(MuiThemeProvider, {\n        theme: muiTheme,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Stepper, {\n        activeStep: activeStep,\n        orientation: \"vertical\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }\n      }, steps.map(function (label) {\n        return /*#__PURE__*/React.createElement(Step, {\n          key: label,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(StepLabel, {\n          className: classes.stepLabel,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 21\n          }\n        }, label), /*#__PURE__*/React.createElement(StepContent, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 21\n          }\n        }, _this2.getStepContent(), /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.actionsContainer,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: _this2.handleContinue,\n          className: classes.continueButton,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 27\n          }\n        }, activeStep === steps.length - 1 ? texts.finish : texts.continue), /*#__PURE__*/React.createElement(Button, {\n          disabled: activeStep === 0,\n          onClick: _this2.handleCancel,\n          className: classes.cancelButton,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 27\n          }\n        }, texts.cancel)))));\n      }))))) : /*#__PURE__*/React.createElement(LoadingSpinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return CreatePlanStepper;\n}(React.Component);\n\nCreatePlanStepper.propTypes = {\n  classes: PropTypes.object,\n  history: PropTypes.object,\n  language: PropTypes.string,\n  match: PropTypes.object\n};\nexport default withRouter(withLanguage(withStyles(styles)(CreatePlanStepper)));","map":{"version":3,"sources":["C:/Users/nucle/Documents/GitHub/Green-Wizards/client/src/components/CreatePlanStepper.js"],"names":["React","PropTypes","withStyles","MuiThemeProvider","createMuiTheme","Stepper","Step","StepLabel","StepContent","Button","autosize","withRouter","axios","moment","LoadingSpinner","Texts","withLanguage","Log","muiTheme","typography","useNextVariants","overrides","MuiStepLabel","label","fontFamily","fontSize","MuiStepIcon","root","display","width","height","color","MuiButton","palette","secondary","main","styles","theme","continueButton","backgroundColor","marginTop","spacing","unit","marginRight","stepLabel","fontWeight","text","primary","textAlign","error","cancelButton","actionsContainer","marginBottom","resetContainer","padding","CreatePlanStepper","state","activeStep","formIsValidated","name","description","location","creatingPlan","from","to","deadline","handleMessage","event","history","props","data","JSON","parse","action","setState","goBack","createPlan","match","groupId","params","post","then","response","info","catch","handleContinue","validate","handleCancel","handleChange","target","value","language","Date","setCustomValidity","createPlanStepper","rangeErr","deadlineErr","texts","formEl","checkValidity","i","length","elem","errorLabel","document","getElementById","nodeName","toLowerCase","validity","valid","valueMissing","textContent","requiredErr","customError","getStepContent","querySelectorAll","format","addEventListener","removeEventListener","classes","steps","stepLabels","formClass","push","pop","form","preventDefault","map","finish","continue","cancel","Component","propTypes","object","string"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n  withStyles,\r\n  MuiThemeProvider,\r\n  createMuiTheme\r\n} from \"@material-ui/core/styles\";\r\nimport Stepper from \"@material-ui/core/Stepper\";\r\nimport Step from \"@material-ui/core/Step\";\r\nimport StepLabel from \"@material-ui/core/StepLabel\";\r\nimport StepContent from \"@material-ui/core/StepContent\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport autosize from \"autosize\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport LoadingSpinner from \"./LoadingSpinner\";\r\nimport Texts from \"../Constants/Texts\";\r\nimport withLanguage from \"./LanguageContext\";\r\nimport Log from \"./Log\";\r\n\r\nconst muiTheme = createMuiTheme({\r\n  typography: {\r\n    useNextVariants: true\r\n  },\r\n  overrides: {\r\n    MuiStepLabel: {\r\n      label: {\r\n        fontFamily: \"Roboto\",\r\n        fontSize: \"1.56rem\"\r\n      }\r\n    },\r\n    MuiStepIcon: {\r\n      root: {\r\n        display: \"block\",\r\n        width: \"3rem\",\r\n        height: \"3rem\",\r\n        \"&$active\": {\r\n          color: \"#00838f\"\r\n        },\r\n        \"&$completed\": {\r\n          color: \"#00838f\"\r\n        }\r\n      }\r\n    },\r\n    MuiButton: {\r\n      root: {\r\n        fontSize: \"1.4rem\",\r\n        fontFamily: \"Roboto\"\r\n      }\r\n    }\r\n  },\r\n  palette: {\r\n    secondary: {\r\n      main: \"#c43e00\"\r\n    }\r\n  }\r\n});\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: \"95%\"\r\n  },\r\n  continueButton: {\r\n    backgroundColor: \"#00838f\",\r\n    marginTop: theme.spacing.unit,\r\n    marginRight: theme.spacing.unit,\r\n    \"&:hover\": {\r\n      backgroundColor: \"#00838f\"\r\n    }\r\n  },\r\n  stepLabel: {\r\n    root: {\r\n      color: \"#ffffff\",\r\n      \"&$active\": {\r\n        color: \"white\",\r\n        fontWeight: 500\r\n      },\r\n      \"&$completed\": {\r\n        color: theme.palette.text.primary,\r\n        fontWeight: 500\r\n      },\r\n      \"&$alternativeLabel\": {\r\n        textAlign: \"center\",\r\n        marginTop: 16,\r\n        fontSize: \"5rem\"\r\n      },\r\n      \"&$error\": {\r\n        color: theme.palette.error.main\r\n      }\r\n    }\r\n  },\r\n  cancelButton: {\r\n    backgroundColor: \"#ffffff\",\r\n    marginTop: theme.spacing.unit,\r\n    color: \"grey\",\r\n    marginRight: theme.spacing.unit\r\n  },\r\n  actionsContainer: {\r\n    marginBottom: theme.spacing.unit * 2\r\n  },\r\n  resetContainer: {\r\n    padding: theme.spacing.unit * 3\r\n  }\r\n});\r\n\r\nclass CreatePlanStepper extends React.Component {\r\n  state = {\r\n    activeStep: 0,\r\n    formIsValidated: false,\r\n    name: \"\",\r\n    description: \"\",\r\n    location: \"\",\r\n    creatingPlan: false,\r\n    from: \"\",\r\n    to: \"\",\r\n    deadline: \"\"\r\n  };\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"message\", this.handleMessage, false);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"message\", this.handleMessage, false);\r\n  }\r\n\r\n  handleMessage = event => {\r\n    const { activeStep } = this.state;\r\n    const { history } = this.props;\r\n    const data = JSON.parse(event.data);\r\n    if (data.action === \"stepperGoBack\") {\r\n      if (activeStep - 1 >= 0) {\r\n        this.setState({ activeStep: activeStep - 1 });\r\n      } else {\r\n        history.goBack();\r\n      }\r\n    }\r\n  };\r\n\r\n  createPlan = () => {\r\n    const { history, match } = this.props;\r\n    const { groupId } = match.params;\r\n    this.setState({ creatingPlan: true });\r\n    const { description, name, location, from, to, deadline } = this.state;\r\n    axios\r\n      .post(`/api/groups/${groupId}/plans`, {\r\n        name,\r\n        description,\r\n        location,\r\n        from,\r\n        to,\r\n        deadline\r\n      })\r\n      .then(response => {\r\n        Log.info(response);\r\n        history.goBack();\r\n      })\r\n      .catch(error => {\r\n        Log.error(error);\r\n      });\r\n  };\r\n\r\n  handleContinue = () => {\r\n    const { activeStep } = this.state;\r\n    if (this.validate()) {\r\n      if (activeStep === 3) {\r\n        this.createPlan();\r\n      }\r\n      this.setState(state => ({\r\n        activeStep: state.activeStep + 1,\r\n        formIsValidated: false\r\n      }));\r\n    } else {\r\n      this.setState({ formIsValidated: true });\r\n    }\r\n  };\r\n\r\n  handleCancel = () => {\r\n    this.setState(state => ({\r\n      activeStep: state.activeStep - 1\r\n    }));\r\n  };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    const { language } = this.props;\r\n    const { from } = this.state;\r\n    if (name === \"to\") {\r\n      if (new Date(from) - new Date(value) > 0) {\r\n        event.target.setCustomValidity(\r\n          Texts[language].createPlanStepper.rangeErr\r\n        );\r\n      } else {\r\n        event.target.setCustomValidity(\"\");\r\n      }\r\n    } else if (name === \"deadline\") {\r\n      if (new Date(value) - new Date(from) > 0) {\r\n        event.target.setCustomValidity(\r\n          Texts[language].createPlanStepper.deadlineErr\r\n        );\r\n      } else {\r\n        event.target.setCustomValidity(\"\");\r\n      }\r\n    } else {\r\n      event.target.setCustomValidity(\"\");\r\n    }\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  validate = () => {\r\n    const { language } = this.props;\r\n    const texts = Texts[language].createPlanStepper;\r\n    if (this.formEl.checkValidity() === false) {\r\n      for (let i = 0; i < this.formEl.length; i += 1) {\r\n        const elem = this.formEl[i];\r\n        const errorLabel = document.getElementById(`${elem.name}Err`);\r\n        if (errorLabel && elem.nodeName.toLowerCase() !== \"button\") {\r\n          if (!elem.validity.valid) {\r\n            if (elem.validity.valueMissing) {\r\n              errorLabel.textContent = texts.requiredErr;\r\n            } else if (elem.validity.customError) {\r\n              if (elem.name === \"deadline\") {\r\n                errorLabel.textContent = texts.deadlineErr;\r\n              } else {\r\n                errorLabel.textContent = texts.rangeErr;\r\n              }\r\n            }\r\n          } else {\r\n            errorLabel.textContent = \"\";\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    for (let i = 0; i < this.formEl.length; i += 1) {\r\n      const elem = this.formEl[i];\r\n      const errorLabel = document.getElementById(`${elem.name}Err`);\r\n      if (errorLabel && elem.nodeName.toLowerCase() !== \"button\") {\r\n        errorLabel.textContent = \"\";\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  getStepContent = () => {\r\n    const { language } = this.props;\r\n    const {\r\n      activeStep,\r\n      name,\r\n      location,\r\n      description,\r\n      from,\r\n      to,\r\n      deadline\r\n    } = this.state;\r\n    const texts = Texts[language].createPlanStepper;\r\n    switch (activeStep) {\r\n      case 0:\r\n        return (\r\n          <div>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              className=\"createGroupInput form-control\"\r\n              placeholder={texts.name}\r\n              onChange={this.handleChange}\r\n              required\r\n              value={name}\r\n            />\r\n            <span className=\"invalid-feedback\" id=\"nameErr\" />\r\n            <textarea\r\n              rows=\"1\"\r\n              name=\"description\"\r\n              className=\"textareaInput form-control\"\r\n              placeholder={texts.description}\r\n              value={description}\r\n              onChange={event => {\r\n                this.handleChange(event);\r\n                autosize(document.querySelectorAll(\"textarea\"));\r\n              }}\r\n              required\r\n            />\r\n            <span className=\"invalid-feedback\" id=\"descriptionErr\" />\r\n          </div>\r\n        );\r\n      case 1:\r\n        return (\r\n          <div>\r\n            <input\r\n              className=\"createPlanDateInput form-control\"\r\n              type=\"date\"\r\n              onChange={this.handleChange}\r\n              value={from}\r\n              required\r\n              min={moment().format(\"YYYY-MM-DD\")}\r\n              name=\"from\"\r\n            />\r\n            <span className=\"invalid-feedback\" id=\"fromErr\" />\r\n            <input\r\n              className=\"createPlanDateInput form-control\"\r\n              type=\"date\"\r\n              onChange={this.handleChange}\r\n              value={to}\r\n              min={moment(from).format(\"YYYY-MM-DD\")}\r\n              required\r\n              name=\"to\"\r\n            />\r\n            <span className=\"invalid-feedback\" id=\"toErr\" />\r\n          </div>\r\n        );\r\n      case 2:\r\n        return (\r\n          <div>\r\n            <input\r\n              className=\"createPlanDateInput form-control\"\r\n              type=\"date\"\r\n              onChange={this.handleChange}\r\n              value={deadline}\r\n              required\r\n              name=\"deadline\"\r\n            />\r\n            <span className=\"invalid-feedback\" id=\"deadlineErr\" />\r\n          </div>\r\n        );\r\n      case 3:\r\n        return (\r\n          <div>\r\n            <input\r\n              type=\"text\"\r\n              name=\"location\"\r\n              className=\"createGroupInput form-control\"\r\n              placeholder={texts.location}\r\n              onChange={this.handleChange}\r\n              required\r\n              value={location}\r\n            />\r\n            <span className=\"invalid-feedback\" id=\"locationErr\" />\r\n          </div>\r\n        );\r\n      default:\r\n        return <div>Lorem Ipsum</div>;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { classes, language } = this.props;\r\n    const texts = Texts[language].createPlanStepper;\r\n    const steps = texts.stepLabels;\r\n    const { activeStep, formIsValidated, creatingPlan } = this.state;\r\n    const formClass = [];\r\n    if (formIsValidated) {\r\n      formClass.push(\"was-validated\");\r\n    } else {\r\n      formClass.pop();\r\n    }\r\n\r\n    return !creatingPlan ? (\r\n      <div className={classes.root}>\r\n        <form\r\n          ref={form => {\r\n            this.formEl = form;\r\n          }}\r\n          onSubmit={event => event.preventDefault()}\r\n          className={formClass}\r\n          noValidate\r\n        >\r\n          <MuiThemeProvider theme={muiTheme}>\r\n            <Stepper activeStep={activeStep} orientation=\"vertical\">\r\n              {steps.map(label => {\r\n                return (\r\n                  <Step key={label}>\r\n                    <StepLabel className={classes.stepLabel}>{label}</StepLabel>\r\n                    <StepContent>\r\n                      {this.getStepContent()}\r\n                      <div className={classes.actionsContainer}>\r\n                        <div>\r\n                          <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={this.handleContinue}\r\n                            className={classes.continueButton}\r\n                          >\r\n                            {activeStep === steps.length - 1\r\n                              ? texts.finish\r\n                              : texts.continue}\r\n                          </Button>\r\n                          <Button\r\n                            disabled={activeStep === 0}\r\n                            onClick={this.handleCancel}\r\n                            className={classes.cancelButton}\r\n                          >\r\n                            {texts.cancel}\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </StepContent>\r\n                  </Step>\r\n                );\r\n              })}\r\n            </Stepper>\r\n          </MuiThemeProvider>\r\n        </form>\r\n      </div>\r\n    ) : (\r\n      <LoadingSpinner />\r\n    );\r\n  }\r\n}\r\n\r\nCreatePlanStepper.propTypes = {\r\n  classes: PropTypes.object,\r\n  history: PropTypes.object,\r\n  language: PropTypes.string,\r\n  match: PropTypes.object\r\n};\r\nexport default withRouter(withLanguage(withStyles(styles)(CreatePlanStepper)));\r\n"]},"metadata":{},"sourceType":"module"}