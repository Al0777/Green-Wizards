{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\src\\\\components\\\\EditProfileScreen.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport * as path from \"lodash.get\";\nimport autosize from \"autosize\";\nimport withLanguage from \"./LanguageContext\";\nimport Texts from \"../Constants/Texts\";\nimport LoadingSpinner from \"./LoadingSpinner\";\nimport Log from \"./Log\";\n\nvar dataURLtoFile = function dataURLtoFile(dataurl, filename) {\n  var arr = dataurl.split(\",\");\n  var mime = arr[0].match(/:(.*?);/)[1];\n  var bstr = atob(arr[1]);\n  var n = bstr.length;\n  var u8arr = new Uint8Array(n);\n\n  while (n) {\n    n -= 1;\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n\n  return new File([u8arr], filename, {\n    type: mime\n  });\n};\n\nvar EditProfileScreen = /*#__PURE__*/function (_React$Component) {\n  _inherits(EditProfileScreen, _React$Component);\n\n  var _super = _createSuper(EditProfileScreen);\n\n  function EditProfileScreen() {\n    var _this;\n\n    _classCallCheck(this, EditProfileScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      fetchedProfile: false\n    };\n\n    _this.handleMessage = function (event) {\n      var data = JSON.parse(event.data);\n\n      if (data.action === \"fileUpload\") {\n        var image = \"data:image/png;base64, \".concat(data.value);\n\n        _this.setState({\n          image: {\n            path: image\n          },\n          file: dataURLtoFile(image, \"photo.png\")\n        });\n      }\n    };\n\n    _this.validate = function () {\n      var language = _this.props.language;\n      var texts = Texts[language].editProfileScreen;\n      var formLength = _this.formEl.length;\n\n      if (_this.formEl.checkValidity() === false) {\n        for (var i = 0; i < formLength; i += 1) {\n          var elem = _this.formEl[i];\n          var errorLabel = document.getElementById(\"\".concat(elem.name, \"Err\"));\n\n          if (errorLabel && elem.nodeName.toLowerCase() !== \"button\") {\n            if (!elem.validity.valid) {\n              if (elem.validity.valueMissing) {\n                errorLabel.textContent = texts.requiredErr;\n              }\n            } else {\n              errorLabel.textContent = \"\";\n            }\n          }\n        }\n\n        return false;\n      }\n\n      for (var _i = 0; _i < formLength; _i += 1) {\n        var _elem = _this.formEl[_i];\n\n        var _errorLabel = document.getElementById(\"\".concat(_elem.name, \"Err\"));\n\n        if (_errorLabel && _elem.nodeName.toLowerCase() !== \"button\") {\n          _errorLabel.textContent = \"\";\n        }\n      }\n\n      return true;\n    };\n\n    _this.submitChanges = function () {\n      var _this$props = _this.props,\n          match = _this$props.match,\n          history = _this$props.history;\n      var userId = match.params.profileId;\n      var _this$state = _this.state,\n          file = _this$state.file,\n          given_name = _this$state.given_name,\n          email = _this$state.email,\n          family_name = _this$state.family_name,\n          visible = _this$state.visible,\n          phone = _this$state.phone,\n          contact_option = _this$state.contact_option,\n          phone_type = _this$state.phone_type,\n          address = _this$state.address,\n          description = _this$state.description;\n      var city = address.city,\n          street = address.street,\n          number = address.number,\n          address_id = address.address_id;\n      var bodyFormData = new FormData();\n\n      if (file !== undefined) {\n        bodyFormData.append(\"photo\", file);\n      }\n\n      bodyFormData.append(\"given_name\", given_name);\n      bodyFormData.append(\"family_name\", family_name);\n      bodyFormData.append(\"visible\", visible);\n      bodyFormData.append(\"email\", email);\n      bodyFormData.append(\"phone\", phone);\n      bodyFormData.append(\"phone_type\", phone_type);\n      bodyFormData.append(\"contact_option\", contact_option);\n      bodyFormData.append(\"city\", city);\n      bodyFormData.append(\"street\", street);\n      bodyFormData.append(\"number\", number);\n      bodyFormData.append(\"address_id\", address_id);\n      bodyFormData.append(\"description\", description);\n      axios.patch(\"/api/users/\".concat(userId, \"/profile\"), bodyFormData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(function (response) {\n        Log.info(response);\n        history.goBack();\n      }).catch(function (error) {\n        Log.error(error);\n        history.goBack();\n      });\n    };\n\n    _this.handleCancel = function () {\n      var history = _this.props.history;\n      history.goBack();\n    };\n\n    _this.handleSave = function () {\n      if (_this.validate()) {\n        _this.submitChanges();\n      }\n\n      _this.setState({\n        formIsValidated: true\n      });\n    };\n\n    _this.handleImageChange = function (event) {\n      if (event.target.files && event.target.files[0]) {\n        var file = event.target.files[0];\n        var reader = new FileReader();\n\n        reader.onload = function (e) {\n          _this.setState({\n            image: {\n              path: e.target.result\n            },\n            file: file\n          });\n        };\n\n        reader.readAsDataURL(event.target.files[0]);\n      }\n    };\n\n    _this.handleNativeImageChange = function () {\n      window.ReactNativeWebView.postMessage(JSON.stringify({\n        action: \"fileUpload\"\n      }));\n    };\n\n    _this.handleAddressChange = function (event) {\n      var name = event.target.name;\n      var value = event.target.value;\n      var address = _this.state.address;\n      address[name] = value;\n\n      _this.setState({\n        address: address\n      });\n    };\n\n    _this.handleChange = function (event) {\n      var name = event.target.name;\n      var value = event.target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleVisibility = function (event) {\n      var visible = event.target.value === \"visible\";\n\n      _this.setState({\n        visible: visible\n      });\n    };\n\n    _this.handleContact = function (event) {\n      var value = event.target.value;\n\n      _this.setState({\n        contact_option: value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(EditProfileScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      document.addEventListener(\"message\", this.handleMessage, false);\n      var userId = JSON.parse(localStorage.getItem(\"user\")).id;\n      axios.get(\"/api/users/\".concat(userId, \"/profile\")).then(function (response) {\n        var profile = response.data;\n\n        _this2.setState(_objectSpread({\n          fetchedProfile: true\n        }, profile));\n      }).catch(function (error) {\n        Log.error(error);\n\n        _this2.setState({\n          image: {\n            path: \"\"\n          }\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"message\", this.handleMessage, false);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var language = this.props.language;\n      var _this$state2 = this.state,\n          formIsValidated = _this$state2.formIsValidated,\n          fetchedProfile = _this$state2.fetchedProfile,\n          image = _this$state2.image,\n          given_name = _this$state2.given_name,\n          family_name = _this$state2.family_name,\n          contact_option = _this$state2.contact_option,\n          visible = _this$state2.visible,\n          phone = _this$state2.phone,\n          phone_type = _this$state2.phone_type,\n          email = _this$state2.email,\n          address = _this$state2.address,\n          description = _this$state2.description;\n      var bottomBorder = {\n        borderBottom: \"1px solid rgba(0,0,0,0.5)\"\n      };\n      var texts = Texts[language].editProfileScreen;\n      var formClass = [];\n\n      if (formIsValidated) {\n        formClass.push(\"was-validated\");\n      }\n\n      return fetchedProfile ? /*#__PURE__*/React.createElement(\"form\", {\n        ref: function ref(form) {\n          _this3.formEl = form;\n        },\n        onSubmit: function onSubmit(event) {\n          return event.preventDefault();\n        },\n        className: formClass,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"profileHeaderContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        id: \"profileHeaderOptions\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton center\",\n        onClick: this.handleCancel,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-arrow-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-6-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"verticalCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 15\n        }\n      }, texts.header)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton center\",\n        onClick: this.handleSave,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(\"img\", {\n        className: \"profilePhoto horizontalCenter\",\n        alt: \"user's profile\",\n        src: path(image, [\"path\"]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"editGivenNameInput\",\n        id: \"editGivenNameLabel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }\n      }, texts.name), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: given_name,\n        id: \"editGivenNameInput\",\n        className: \"form-control\",\n        required: true,\n        name: \"given_name\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"invalid-feedback\",\n        id: \"nameErr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"editFamilyNameInput\",\n        id: \"editFamilyNameLabel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }\n      }, texts.surname), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: family_name,\n        id: \"editFamilyNameInput\",\n        className: \"form-control\",\n        required: true,\n        name: \"family_name\",\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"invalid-feedback\",\n        id: \"nameErr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"uploadProfilePhotoContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        htmlFor: \"uploadPhotoInput\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        role: \"button\",\n        tabIndex: -42,\n        className: \"fas fa-camera\",\n        onClick: function onClick() {\n          return window.isNative ? _this3.handleNativeImageChange() : function () {};\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }\n      })), !window.isNative && /*#__PURE__*/React.createElement(\"input\", {\n        id: \"uploadPhotoInput\",\n        type: \"file\",\n        accept: \"image/*\",\n        name: \"photo\",\n        onChange: this.handleImageChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"editProfileInfoContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-phone center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-5-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: texts.phoneNumber,\n        name: \"phone\",\n        className: \"editProfileInputField form-control\",\n        onChange: this.handleChange,\n        value: phone,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"invalid-feedback\",\n        id: \"phoneErr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        value: phone_type,\n        onChange: this.handleChange,\n        className: \"editProfileInputField\",\n        name: \"phone_type\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"mobile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 17\n        }\n      }, texts.mobile), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"home\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 17\n        }\n      }, texts.home), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"unspecified\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 17\n        }\n      }, texts.unspecified)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        style: bottomBorder,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas address-book\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-8-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        value: contact_option,\n        onChange: this.handleContact,\n        className: \"editProfileInputField\",\n        name: \"contact\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"whatsapp\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 17\n        }\n      }, texts.whatsappOption), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"viber\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 17\n        }\n      }, texts.viberOption), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 17\n        }\n      }, texts.emailOption)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-map-marker-alt center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-8-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: texts.city,\n        name: \"city\",\n        className: \"editProfileInputField form-control\",\n        onChange: this.handleAddressChange,\n        value: address.city,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"invalid-feedback\",\n        id: \"cityErr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        style: bottomBorder,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-5-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: texts.street,\n        name: \"street\",\n        className: \"editProfileInputField form-control\",\n        onChange: this.handleAddressChange,\n        value: address.street,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"invalid-feedback\",\n        id: \"streetErr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-3-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: texts.streetNumber,\n        name: \"number\",\n        className: \"editProfileInputField form-control\",\n        onChange: this.handleAddressChange,\n        value: address.number,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"invalid-feedback\",\n        id: \"numberErr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        style: bottomBorder,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-envelope center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-8-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"email\",\n        placeholder: texts.email,\n        name: \"email\",\n        className: \"editProfileInputField form-control\",\n        onChange: this.handleChange,\n        required: true,\n        value: email,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"invalid-feedback\",\n        id: \"emailErr\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        style: bottomBorder,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-info-circle center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-8-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        rows: \"3\",\n        name: \"description\",\n        className: \"editProfileInputField form-control \",\n        placeholder: texts.description,\n        onChange: function onChange(event) {\n          _this3.handleChange(event);\n\n          autosize(document.querySelectorAll(\"textarea\"));\n        },\n        value: description,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-eye center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-8-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        value: visible ? \"visible\" : \"invisible\",\n        onChange: this.handleVisibility,\n        className: \"editProfileInputField\",\n        name: \"visible\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"visible\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 17\n        }\n      }, texts.visible), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"invisible\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 17\n        }\n      }, texts.invisible)))))) : /*#__PURE__*/React.createElement(LoadingSpinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return EditProfileScreen;\n}(React.Component);\n\nexport default withLanguage(EditProfileScreen);\nEditProfileScreen.propTypes = {\n  language: PropTypes.string,\n  history: PropTypes.object,\n  match: PropTypes.object\n};","map":{"version":3,"sources":["C:/Users/nucle/Documents/GitHub/Families_Share-platform/client/src/components/EditProfileScreen.js"],"names":["React","axios","PropTypes","path","autosize","withLanguage","Texts","LoadingSpinner","Log","dataURLtoFile","dataurl","filename","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","File","type","EditProfileScreen","state","fetchedProfile","handleMessage","event","data","JSON","parse","action","image","value","setState","file","validate","language","props","texts","editProfileScreen","formLength","formEl","checkValidity","i","elem","errorLabel","document","getElementById","name","nodeName","toLowerCase","validity","valid","valueMissing","textContent","requiredErr","submitChanges","history","userId","params","profileId","given_name","email","family_name","visible","phone","contact_option","phone_type","address","description","city","street","number","address_id","bodyFormData","FormData","undefined","append","patch","headers","then","response","info","goBack","catch","error","handleCancel","handleSave","formIsValidated","handleImageChange","target","files","reader","FileReader","onload","e","result","readAsDataURL","handleNativeImageChange","window","ReactNativeWebView","postMessage","stringify","handleAddressChange","handleChange","handleVisibility","handleContact","addEventListener","localStorage","getItem","id","get","profile","removeEventListener","bottomBorder","borderBottom","formClass","push","form","preventDefault","header","surname","isNative","phoneNumber","mobile","home","unspecified","whatsappOption","viberOption","emailOption","streetNumber","querySelectorAll","invisible","Component","propTypes","string","object"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as path from \"lodash.get\";\r\nimport autosize from \"autosize\";\r\nimport withLanguage from \"./LanguageContext\";\r\nimport Texts from \"../Constants/Texts\";\r\nimport LoadingSpinner from \"./LoadingSpinner\";\r\nimport Log from \"./Log\";\r\n\r\nconst dataURLtoFile = (dataurl, filename) => {\r\n  const arr = dataurl.split(\",\");\r\n  const mime = arr[0].match(/:(.*?);/)[1];\r\n  const bstr = atob(arr[1]);\r\n  let n = bstr.length;\r\n  const u8arr = new Uint8Array(n);\r\n  while (n) {\r\n    n -= 1;\r\n    u8arr[n] = bstr.charCodeAt(n);\r\n  }\r\n  return new File([u8arr], filename, { type: mime });\r\n};\r\n\r\nclass EditProfileScreen extends React.Component {\r\n  state = { fetchedProfile: false };\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"message\", this.handleMessage, false);\r\n    const userId = JSON.parse(localStorage.getItem(\"user\")).id;\r\n    axios\r\n      .get(`/api/users/${userId}/profile`)\r\n      .then(response => {\r\n        const profile = response.data;\r\n        this.setState({ fetchedProfile: true, ...profile });\r\n      })\r\n      .catch(error => {\r\n        Log.error(error);\r\n        this.setState({ image: { path: \"\" } });\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"message\", this.handleMessage, false);\r\n  }\r\n\r\n  handleMessage = event => {\r\n    const data = JSON.parse(event.data);\r\n    if (data.action === \"fileUpload\") {\r\n      const image = `data:image/png;base64, ${data.value}`;\r\n      this.setState({\r\n        image: { path: image },\r\n        file: dataURLtoFile(image, \"photo.png\")\r\n      });\r\n    }\r\n  };\r\n\r\n  validate = () => {\r\n    const { language } = this.props;\r\n    const texts = Texts[language].editProfileScreen;\r\n    const formLength = this.formEl.length;\r\n    if (this.formEl.checkValidity() === false) {\r\n      for (let i = 0; i < formLength; i += 1) {\r\n        const elem = this.formEl[i];\r\n        const errorLabel = document.getElementById(`${elem.name}Err`);\r\n        if (errorLabel && elem.nodeName.toLowerCase() !== \"button\") {\r\n          if (!elem.validity.valid) {\r\n            if (elem.validity.valueMissing) {\r\n              errorLabel.textContent = texts.requiredErr;\r\n            }\r\n          } else {\r\n            errorLabel.textContent = \"\";\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    for (let i = 0; i < formLength; i += 1) {\r\n      const elem = this.formEl[i];\r\n      const errorLabel = document.getElementById(`${elem.name}Err`);\r\n      if (errorLabel && elem.nodeName.toLowerCase() !== \"button\") {\r\n        errorLabel.textContent = \"\";\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  submitChanges = () => {\r\n    const { match, history } = this.props;\r\n    const { profileId: userId } = match.params;\r\n    const {\r\n      file,\r\n      given_name,\r\n      email,\r\n      family_name,\r\n      visible,\r\n      phone,\r\n      contact_option,\r\n      phone_type,\r\n      address,\r\n      description\r\n    } = this.state;\r\n    const { city, street, number, address_id } = address;\r\n    const bodyFormData = new FormData();\r\n    if (file !== undefined) {\r\n      bodyFormData.append(\"photo\", file);\r\n    }\r\n    bodyFormData.append(\"given_name\", given_name);\r\n    bodyFormData.append(\"family_name\", family_name);\r\n    bodyFormData.append(\"visible\", visible);\r\n    bodyFormData.append(\"email\", email);\r\n    bodyFormData.append(\"phone\", phone);\r\n    bodyFormData.append(\"phone_type\", phone_type);\r\n    bodyFormData.append(\"contact_option\", contact_option);\r\n    bodyFormData.append(\"city\", city);\r\n    bodyFormData.append(\"street\", street);\r\n    bodyFormData.append(\"number\", number);\r\n    bodyFormData.append(\"address_id\", address_id);\r\n    bodyFormData.append(\"description\", description);\r\n    axios\r\n      .patch(`/api/users/${userId}/profile`, bodyFormData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\"\r\n        }\r\n      })\r\n      .then(response => {\r\n        Log.info(response);\r\n        history.goBack();\r\n      })\r\n      .catch(error => {\r\n        Log.error(error);\r\n        history.goBack();\r\n      });\r\n  };\r\n\r\n  handleCancel = () => {\r\n    const { history } = this.props;\r\n    history.goBack();\r\n  };\r\n\r\n  handleSave = () => {\r\n    if (this.validate()) {\r\n      this.submitChanges();\r\n    }\r\n    this.setState({ formIsValidated: true });\r\n  };\r\n\r\n  handleImageChange = event => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      const file = event.target.files[0];\r\n      const reader = new FileReader();\r\n      reader.onload = e => {\r\n        this.setState({ image: { path: e.target.result }, file });\r\n      };\r\n      reader.readAsDataURL(event.target.files[0]);\r\n    }\r\n  };\r\n\r\n  handleNativeImageChange = () => {\r\n    window.ReactNativeWebView.postMessage(\r\n      JSON.stringify({ action: \"fileUpload\" })\r\n    );\r\n  };\r\n\r\n  handleAddressChange = event => {\r\n    const { name } = event.target;\r\n    const { value } = event.target;\r\n    const { address } = this.state;\r\n    address[name] = value;\r\n    this.setState({ address });\r\n  };\r\n\r\n  handleChange = event => {\r\n    const { name } = event.target;\r\n    const { value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleVisibility = event => {\r\n    const visible = event.target.value === \"visible\";\r\n    this.setState({ visible });\r\n  };\r\n\r\n  handleContact = event => {\r\n    const {\r\n      target: { value }\r\n    } = event;\r\n    this.setState({ contact_option: value });\r\n  };\r\n\r\n  render() {\r\n    const { language } = this.props;\r\n    const {\r\n      formIsValidated,\r\n      fetchedProfile,\r\n      image,\r\n      given_name,\r\n      family_name,\r\n      contact_option,\r\n      visible,\r\n      phone,\r\n      phone_type,\r\n      email,\r\n      address,\r\n      description\r\n    } = this.state;\r\n    const bottomBorder = { borderBottom: \"1px solid rgba(0,0,0,0.5)\" };\r\n    const texts = Texts[language].editProfileScreen;\r\n    const formClass = [];\r\n    if (formIsValidated) {\r\n      formClass.push(\"was-validated\");\r\n    }\r\n    return fetchedProfile ? (\r\n      <form\r\n        ref={form => {\r\n          this.formEl = form;\r\n        }}\r\n        onSubmit={event => event.preventDefault()}\r\n        className={formClass}\r\n        noValidate\r\n      >\r\n        <div id=\"profileHeaderContainer\">\r\n          <div className=\"row no-gutters\" id=\"profileHeaderOptions\">\r\n            <div className=\"col-2-10\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"transparentButton center\"\r\n                onClick={this.handleCancel}\r\n              >\r\n                <i className=\"fas fa-arrow-left\" />\r\n              </button>\r\n            </div>\r\n            <div className=\"col-6-10\">\r\n              <h2 className=\"verticalCenter\">{texts.header}</h2>\r\n            </div>\r\n            <div className=\"col-2-10\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"transparentButton center\"\r\n                onClick={this.handleSave}\r\n              >\r\n                <i className=\"fas fa-check\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <img\r\n            className=\"profilePhoto horizontalCenter\"\r\n            alt=\"user's profile\"\r\n            src={path(image, [\"path\"])}\r\n          />\r\n          <label htmlFor=\"editGivenNameInput\" id=\"editGivenNameLabel\">\r\n            {texts.name}\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={given_name}\r\n            id=\"editGivenNameInput\"\r\n            className=\"form-control\"\r\n            required\r\n            name=\"given_name\"\r\n            onChange={this.handleChange}\r\n          />\r\n          <span className=\"invalid-feedback\" id=\"nameErr\" />\r\n          <label htmlFor=\"editFamilyNameInput\" id=\"editFamilyNameLabel\">\r\n            {texts.surname}\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={family_name}\r\n            id=\"editFamilyNameInput\"\r\n            className=\"form-control\"\r\n            required\r\n            name=\"family_name\"\r\n            onChange={this.handleChange}\r\n          />\r\n          <span className=\"invalid-feedback\" id=\"nameErr\" />\r\n          <div id=\"uploadProfilePhotoContainer\">\r\n            <label htmlFor=\"uploadPhotoInput\">\r\n              <i\r\n                role=\"button\"\r\n                tabIndex={-42}\r\n                className=\"fas fa-camera\"\r\n                onClick={() =>\r\n                  window.isNative ? this.handleNativeImageChange() : () => {}\r\n                }\r\n              />\r\n            </label>\r\n            {!window.isNative && (\r\n              <input\r\n                id=\"uploadPhotoInput\"\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                name=\"photo\"\r\n                onChange={this.handleImageChange}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div id=\"editProfileInfoContainer\">\r\n          <div className=\"row no-gutters\">\r\n            <div className=\"col-2-10\">\r\n              <i className=\"fas fa-phone center\" />\r\n            </div>\r\n            <div className=\"col-5-10\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder={texts.phoneNumber}\r\n                name=\"phone\"\r\n                className=\"editProfileInputField form-control\"\r\n                onChange={this.handleChange}\r\n                value={phone}\r\n              />\r\n              <span className=\"invalid-feedback\" id=\"phoneErr\" />\r\n            </div>\r\n            <div className=\"col-3-10\">\r\n              <select\r\n                value={phone_type}\r\n                onChange={this.handleChange}\r\n                className=\"editProfileInputField\"\r\n                name=\"phone_type\"\r\n              >\r\n                <option value=\"mobile\">{texts.mobile}</option>\r\n                <option value=\"home\">{texts.home}</option>\r\n                <option value=\"unspecified\">{texts.unspecified}</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"row no-gutters\" style={bottomBorder}>\r\n            <div className=\"col-2-10\">\r\n              <i className=\"fas address-book\" />\r\n            </div>\r\n            <div className=\"col-8-10\">\r\n              <select\r\n                value={contact_option}\r\n                onChange={this.handleContact}\r\n                className=\"editProfileInputField\"\r\n                name=\"contact\"\r\n              >\r\n                <option value=\"whatsapp\">{texts.whatsappOption}</option>\r\n                <option value=\"viber\">{texts.viberOption}</option>\r\n                <option value=\"email\">{texts.emailOption}</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"row no-gutters\">\r\n            <div className=\"col-2-10\">\r\n              <i className=\"fas fa-map-marker-alt center\" />\r\n            </div>\r\n            <div className=\"col-8-10\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder={texts.city}\r\n                name=\"city\"\r\n                className=\"editProfileInputField form-control\"\r\n                onChange={this.handleAddressChange}\r\n                value={address.city}\r\n              />\r\n              <span className=\"invalid-feedback\" id=\"cityErr\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"row no-gutters\" style={bottomBorder}>\r\n            <div className=\"col-2-10\" />\r\n            <div className=\"col-5-10\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder={texts.street}\r\n                name=\"street\"\r\n                className=\"editProfileInputField form-control\"\r\n                onChange={this.handleAddressChange}\r\n                value={address.street}\r\n              />\r\n              <span className=\"invalid-feedback\" id=\"streetErr\" />\r\n            </div>\r\n            <div className=\"col-3-10\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder={texts.streetNumber}\r\n                name=\"number\"\r\n                className=\"editProfileInputField form-control\"\r\n                onChange={this.handleAddressChange}\r\n                value={address.number}\r\n              />\r\n              <span className=\"invalid-feedback\" id=\"numberErr\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"row no-gutters\" style={bottomBorder}>\r\n            <div className=\"col-2-10\">\r\n              <i className=\"fas fa-envelope center\" />\r\n            </div>\r\n            <div className=\"col-8-10\">\r\n              <input\r\n                type=\"email\"\r\n                placeholder={texts.email}\r\n                name=\"email\"\r\n                className=\"editProfileInputField form-control\"\r\n                onChange={this.handleChange}\r\n                required\r\n                value={email}\r\n              />\r\n              <span className=\"invalid-feedback\" id=\"emailErr\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"row no-gutters\" style={bottomBorder}>\r\n            <div className=\"col-2-10\">\r\n              <i className=\"fas fa-info-circle center\" />\r\n            </div>\r\n            <div className=\"col-8-10\">\r\n              <textarea\r\n                rows=\"3\"\r\n                name=\"description\"\r\n                className=\"editProfileInputField form-control \"\r\n                placeholder={texts.description}\r\n                onChange={event => {\r\n                  this.handleChange(event);\r\n                  autosize(document.querySelectorAll(\"textarea\"));\r\n                }}\r\n                value={description}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"row no-gutters\">\r\n            <div className=\"col-2-10\">\r\n              <i className=\"fas fa-eye center\" />\r\n            </div>\r\n            <div className=\"col-8-10\">\r\n              <select\r\n                value={visible ? \"visible\" : \"invisible\"}\r\n                onChange={this.handleVisibility}\r\n                className=\"editProfileInputField\"\r\n                name=\"visible\"\r\n              >\r\n                <option value=\"visible\">{texts.visible}</option>\r\n                <option value=\"invisible\">{texts.invisible}</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    ) : (\r\n      <LoadingSpinner />\r\n    );\r\n  }\r\n}\r\n\r\nexport default withLanguage(EditProfileScreen);\r\n\r\nEditProfileScreen.propTypes = {\r\n  language: PropTypes.string,\r\n  history: PropTypes.object,\r\n  match: PropTypes.object\r\n};\r\n"]},"metadata":{},"sourceType":"module"}