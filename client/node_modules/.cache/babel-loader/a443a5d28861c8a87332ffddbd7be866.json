{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\src\\\\components\\\\ChildProfileScreen.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport * as path from \"lodash.get\";\nimport ChildProfileHeader from \"./ChildProfileHeader\";\nimport ChildProfileInfo from \"./ChildProfileInfo\";\nimport LoadingSpinner from \"./LoadingSpinner\";\nimport Log from \"./Log\";\n\nvar getChild = function getChild(userId, childId) {\n  return axios.get(\"/api/users/\".concat(userId, \"/children/\").concat(childId)).then(function (response) {\n    return response.data;\n  }).catch(function (error) {\n    Log.error(error);\n    return {\n      child_id: childId,\n      image: {\n        path: \"\"\n      },\n      background: \"\",\n      given_name: \"\",\n      family_name: \"\",\n      birthdate: new Date(),\n      gender: \"unspecified\",\n      allergies: \"\",\n      other_info: \"\",\n      special_needs: \"\"\n    };\n  });\n};\n\nvar getParents = function getParents(userId, childId) {\n  return axios.get(\"/api/users/\".concat(userId, \"/children/\").concat(childId, \"/parents\")).then(function (response) {\n    return response.data;\n  }).catch(function (error) {\n    Log.error(error);\n    return [];\n  });\n};\n\nvar ChildProfileScreen = /*#__PURE__*/function (_React$Component) {\n  _inherits(ChildProfileScreen, _React$Component);\n\n  var _super = _createSuper(ChildProfileScreen);\n\n  function ChildProfileScreen() {\n    var _this;\n\n    _classCallCheck(this, ChildProfileScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      fetchedChildData: false,\n      child: {}\n    };\n\n    _this.handleAddParent = function (parent) {\n      var child = _this.state.child;\n      child.parents.push(parent);\n\n      _this.setState({\n        child: child\n      });\n    };\n\n    _this.handleDeleteParent = function (index) {\n      var history = _this.props.history;\n      var child = _this.state.child;\n      child.parents.splice(index, 1);\n\n      _this.setState({\n        child: child\n      });\n\n      if (child.parents.length === 0) history.goBack();\n    };\n\n    return _this;\n  }\n\n  _createClass(ChildProfileScreen, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var match, _match$params, profileId, childId, userId, child;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                match = this.props.match;\n                _match$params = match.params, profileId = _match$params.profileId, childId = _match$params.childId;\n                userId = JSON.parse(localStorage.getItem(\"user\")).id;\n                _context.next = 5;\n                return getChild(profileId, childId);\n\n              case 5:\n                child = _context.sent;\n                _context.next = 8;\n                return getParents(profileId, childId);\n\n              case 8:\n                child.parents = _context.sent;\n                child.showAdditional = userId === profileId;\n                this.setState({\n                  child: child,\n                  fetchedChildData: true\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          child = _this$state.child,\n          fetchedChildData = _this$state.fetchedChildData;\n      return fetchedChildData ? /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ChildProfileHeader, {\n        background: child.background,\n        photo: path(child, [\"image\", \"path\"]),\n        name: \"\".concat(child.given_name, \" \").concat(child.family_name),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(ChildProfileInfo, {\n        birthdate: child.birthdate,\n        parents: child.parents,\n        showAdditional: child.showAdditional,\n        specialNeeds: child.special_needs,\n        otherInfo: child.other_info,\n        allergies: child.allergies,\n        gender: child.gender,\n        handleAddParent: this.handleAddParent,\n        handleDeleteParent: this.handleDeleteParent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 9\n        }\n      })) : /*#__PURE__*/React.createElement(LoadingSpinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return ChildProfileScreen;\n}(React.Component);\n\nChildProfileScreen.propTypes = {\n  match: PropTypes.object,\n  history: PropTypes.object\n};\nexport default ChildProfileScreen;","map":{"version":3,"sources":["C:/Users/nucle/Documents/GitHub/Families_Share-platform/client/src/components/ChildProfileScreen.js"],"names":["React","axios","PropTypes","path","ChildProfileHeader","ChildProfileInfo","LoadingSpinner","Log","getChild","userId","childId","get","then","response","data","catch","error","child_id","image","background","given_name","family_name","birthdate","Date","gender","allergies","other_info","special_needs","getParents","ChildProfileScreen","state","fetchedChildData","child","handleAddParent","parent","parents","push","setState","handleDeleteParent","index","history","props","splice","length","goBack","match","params","profileId","JSON","parse","localStorage","getItem","id","showAdditional","Component","propTypes","object"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as path from \"lodash.get\";\r\nimport ChildProfileHeader from \"./ChildProfileHeader\";\r\nimport ChildProfileInfo from \"./ChildProfileInfo\";\r\nimport LoadingSpinner from \"./LoadingSpinner\";\r\nimport Log from \"./Log\";\r\n\r\nconst getChild = (userId, childId) => {\r\n  return axios\r\n    .get(`/api/users/${userId}/children/${childId}`)\r\n    .then(response => {\r\n      return response.data;\r\n    })\r\n    .catch(error => {\r\n      Log.error(error);\r\n      return {\r\n        child_id: childId,\r\n        image: { path: \"\" },\r\n        background: \"\",\r\n        given_name: \"\",\r\n        family_name: \"\",\r\n        birthdate: new Date(),\r\n        gender: \"unspecified\",\r\n        allergies: \"\",\r\n        other_info: \"\",\r\n        special_needs: \"\"\r\n      };\r\n    });\r\n};\r\nconst getParents = (userId, childId) => {\r\n  return axios\r\n    .get(`/api/users/${userId}/children/${childId}/parents`)\r\n    .then(response => {\r\n      return response.data;\r\n    })\r\n    .catch(error => {\r\n      Log.error(error);\r\n      return [];\r\n    });\r\n};\r\n\r\nclass ChildProfileScreen extends React.Component {\r\n  state = { fetchedChildData: false, child: {} };\r\n\r\n  async componentDidMount() {\r\n    const { match } = this.props;\r\n    const { profileId, childId } = match.params;\r\n    const userId = JSON.parse(localStorage.getItem(\"user\")).id;\r\n    const child = await getChild(profileId, childId);\r\n    child.parents = await getParents(profileId, childId);\r\n    child.showAdditional = userId === profileId;\r\n    this.setState({ child, fetchedChildData: true });\r\n  }\r\n\r\n  handleAddParent = parent => {\r\n    const { child } = this.state;\r\n    child.parents.push(parent);\r\n    this.setState({ child });\r\n  };\r\n\r\n  handleDeleteParent = index => {\r\n    const { history } = this.props;\r\n    const { child } = this.state;\r\n    child.parents.splice(index, 1);\r\n    this.setState({ child });\r\n    if (child.parents.length === 0) history.goBack();\r\n  };\r\n\r\n  render() {\r\n    const { child, fetchedChildData } = this.state;\r\n    return fetchedChildData ? (\r\n      <React.Fragment>\r\n        <ChildProfileHeader\r\n          background={child.background}\r\n          photo={path(child, [\"image\", \"path\"])}\r\n          name={`${child.given_name} ${child.family_name}`}\r\n        />\r\n        <ChildProfileInfo\r\n          birthdate={child.birthdate}\r\n          parents={child.parents}\r\n          showAdditional={child.showAdditional}\r\n          specialNeeds={child.special_needs}\r\n          otherInfo={child.other_info}\r\n          allergies={child.allergies}\r\n          gender={child.gender}\r\n          handleAddParent={this.handleAddParent}\r\n          handleDeleteParent={this.handleDeleteParent}\r\n        />\r\n      </React.Fragment>\r\n    ) : (\r\n      <LoadingSpinner />\r\n    );\r\n  }\r\n}\r\n\r\nChildProfileScreen.propTypes = {\r\n  match: PropTypes.object,\r\n  history: PropTypes.object\r\n};\r\n\r\nexport default ChildProfileScreen;\r\n"]},"metadata":{},"sourceType":"module"}