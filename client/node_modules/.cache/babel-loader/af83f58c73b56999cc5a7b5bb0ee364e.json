{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\src\\\\components\\\\PendingRequestsScreen.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport * as path from \"lodash.get\";\nimport BackNavigation from \"./BackNavigation\";\nimport Texts from \"../Constants/Texts\";\nimport withLanguage from \"./LanguageContext\";\nimport LoadingSpinner from \"./LoadingSpinner\";\nimport Avatar from \"./Avatar\";\nimport Log from \"./Log\";\n\nvar PendingRequestsScreen = /*#__PURE__*/function (_React$Component) {\n  _inherits(PendingRequestsScreen, _React$Component);\n\n  var _super = _createSuper(PendingRequestsScreen);\n\n  function PendingRequestsScreen(props) {\n    var _this;\n\n    _classCallCheck(this, PendingRequestsScreen);\n\n    _this = _super.call(this, props);\n\n    _this.handleConfirm = function (request) {\n      var _this$state = _this.state,\n          requests_type = _this$state.requests_type,\n          requests = _this$state.requests;\n      var match = _this.props.match;\n      var groupId = match.params.groupId;\n\n      switch (requests_type) {\n        case \"group_members\":\n          var filteredUsers = requests.filter(function (req) {\n            return req.user_id !== request.user_id;\n          });\n          axios.patch(\"/api/groups/\".concat(groupId, \"/members\"), {\n            patch: {\n              group_accepted: true\n            },\n            id: request.user_id\n          }).then(function (response) {\n            Log.info(response);\n\n            _this.setState({\n              requests: filteredUsers\n            });\n          }).catch(function (error) {\n            Log.error(error);\n          });\n          break;\n\n        case \"user_groups\":\n          var userId = JSON.parse(localStorage.getItem(\"user\")).id;\n          var filteredGroups = requests.filter(function (req) {\n            return req.group_id !== request.group_id;\n          });\n          axios.patch(\"/api/users/\".concat(userId, \"/groups/\").concat(request.group_id)).then(function (response) {\n            Log.info(response);\n\n            _this.setState({\n              requests: filteredGroups\n            });\n          }).catch(function (error) {\n            Log.error(error);\n          });\n          break;\n\n        case \"group_activities\":\n          var filteredActivities = requests.filter(function (req) {\n            return req.activity_id !== request.activity_id;\n          });\n          axios.patch(\"/api/groups/\".concat(groupId, \"/activities/\").concat(request.activity_id), {\n            status: \"accepted\"\n          }).then(function (response) {\n            Log.info(response);\n\n            _this.setState({\n              requests: filteredActivities\n            });\n          }).catch(function (error) {\n            Log.error(error);\n          });\n          break;\n\n        default:\n      }\n    };\n\n    _this.handleDelete = function (request) {\n      var _this$state2 = _this.state,\n          requests_type = _this$state2.requests_type,\n          requests = _this$state2.requests;\n      var match = _this.props.match;\n      var groupId = match.params.groupId;\n\n      switch (requests_type) {\n        case \"group_members\":\n          var filteredUsers = requests.filter(function (req) {\n            return req.user_id !== request.user_id;\n          });\n          axios.delete(\"/api/groups/\".concat(groupId, \"/members/\").concat(request.user_id)).then(function (response) {\n            Log.info(response);\n\n            _this.setState({\n              requests: filteredUsers\n            });\n          }).catch(function (error) {\n            Log.error(error);\n          });\n          break;\n\n        case \"user_groups\":\n          var userId = JSON.parse(localStorage.getItem(\"user\")).id;\n          var filteredGroups = requests.filter(function (req) {\n            return req.group_id !== request.group_id;\n          });\n          axios.delete(\"/api/users/\".concat(userId, \"/groups/\").concat(request.group_id)).then(function (response) {\n            Log.info(response);\n\n            _this.setState({\n              requests: filteredGroups\n            });\n          }).catch(function (error) {\n            Log.error(error);\n          });\n          break;\n\n        case \"group_activities\":\n          var filterdActivities = requests.filter(function (req) {\n            return req.activity_id !== request.activity_id;\n          });\n          axios.delete(\"/api/groups/\".concat(groupId, \"/activities/\").concat(request.activity_id)).then(function (response) {\n            Log.info(response);\n\n            _this.setState({\n              requests: filterdActivities\n            });\n          }).catch(function (error) {\n            Log.error(error);\n          });\n          break;\n\n        default:\n      }\n    };\n\n    _this.renderAvatar = function (request) {\n      var history = _this.props.history;\n      var requests_type = _this.state.requests_type;\n\n      switch (requests_type) {\n        case \"group_members\":\n          return /*#__PURE__*/React.createElement(Avatar, {\n            className: \"verticalCenter\",\n            thumbnail: path(request, [\"image\", \"path\"]),\n            route: \"/profiles/\".concat(request.user_id, \"/info\"),\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 11\n            }\n          });\n\n        case \"user_groups\":\n          return /*#__PURE__*/React.createElement(Avatar, {\n            className: \"verticalCenter\",\n            thumbnail: path(request, [\"image\", \"path\"]),\n            route: \"/groups/\".concat(request.group_id, \"/info\"),\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 11\n            }\n          });\n\n        case \"group_activities\":\n          return /*#__PURE__*/React.createElement(\"i\", {\n            role: \"button\",\n            tabIndex: -42,\n            onClick: function onClick() {\n              return history.push(\"/groups/\".concat(request.group_id, \"/activities/\").concat(request.activity_id));\n            },\n            style: {\n              fontSize: \"3rem\",\n              color: request.color\n            },\n            className: \"fas fa-certificate center\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 11\n            }\n          });\n\n        default:\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 16\n            }\n          });\n      }\n    };\n\n    _this.renderName = function (request) {\n      var requests_type = _this.state.requests_type;\n      var history = _this.props.history;\n      var requestName;\n      var route;\n\n      if (requests_type === \"group_members\") {\n        requestName = \"\".concat(request.family_name, \" \").concat(request.given_name[0], \".\");\n        route = \"/profiles/\".concat(request.user_id, \"/info\");\n      } else if (requests_type === \"user_groups\") {\n        requestName = request.name;\n        route = \"/groups/\".concat(request.group_id, \"/activities\");\n      } else {\n        requestName = request.name;\n        route = \"/groups/\".concat(request.group_id, \"/activities/\").concat(request.activity_id);\n      }\n\n      return /*#__PURE__*/React.createElement(\"h1\", {\n        style: {\n          cursor: \"pointer\"\n        },\n        className: \"verticalCenter\",\n        onClick: function onClick() {\n          history.push(route);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 7\n        }\n      }, requestName);\n    };\n\n    _this.handleGoBack = function () {\n      var history = _this.props.history;\n\n      if (history.length === 1) {\n        history.replace(\"/myfamiliesshare\");\n      } else {\n        history.goBack();\n      }\n    };\n\n    var _requests_type;\n\n    var _history = _this.props.history;\n    var pathname = _history.location.pathname;\n\n    if (pathname.includes(\"members\")) {\n      _requests_type = \"group_members\";\n    } else if (pathname.includes(\"invites\")) {\n      _requests_type = \"user_groups\";\n    } else {\n      _requests_type = \"group_activities\";\n    }\n\n    _this.state = {\n      fetchedRequests: false,\n      requests_type: _requests_type\n    };\n    return _this;\n  }\n\n  _createClass(PendingRequestsScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var match = this.props.match;\n      var groupId = match.params.groupId;\n      var requests_type = this.state.requests_type;\n      var userId = JSON.parse(localStorage.getItem(\"user\")).id;\n\n      switch (requests_type) {\n        case \"group_members\":\n          axios.get(\"/api/groups/\".concat(groupId, \"/members\")).then(function (res) {\n            var requests = res.data.filter(function (member) {\n              return !member.group_accepted && member.user_accepted;\n            });\n            var profileIds = requests.map(function (request) {\n              return request.user_id;\n            });\n            return axios.get(\"/api/profiles\", {\n              params: {\n                ids: profileIds,\n                searchBy: \"ids\"\n              }\n            });\n          }).then(function (res) {\n            var profiles = res.data;\n\n            _this2.setState({\n              fetchedRequests: true,\n              requests: profiles\n            });\n          }).catch(function (error) {\n            Log.error(error);\n\n            _this2.setState({\n              fetchedRequests: true,\n              requests: []\n            });\n          });\n          break;\n\n        case \"user_groups\":\n          axios.get(\"/api/users/\".concat(userId, \"/groups\")).then(function (res) {\n            var requests = res.data.filter(function (member) {\n              return member.group_accepted && !member.user_accepted;\n            });\n            var groupIds = requests.map(function (request) {\n              return request.group_id;\n            });\n            return axios.get(\"/api/groups\", {\n              params: {\n                ids: groupIds,\n                searchBy: \"ids\"\n              }\n            });\n          }).then(function (res) {\n            var groups = res.data;\n\n            _this2.setState({\n              fetchedRequests: true,\n              requests: groups\n            });\n          }).catch(function (error) {\n            Log.error(error);\n\n            _this2.setState({\n              fetchedRequests: true,\n              requests: []\n            });\n          });\n          break;\n\n        case \"group_activities\":\n          axios.get(\"/api/groups/\".concat(groupId, \"/activities\")).then(function (res) {\n            var activities = res.data.filter(function (activity) {\n              return activity.status === \"pending\";\n            });\n\n            _this2.setState({\n              fetchedRequests: true,\n              requests: activities\n            });\n          }).catch(function (error) {\n            Log.error(error);\n\n            _this2.setState({\n              fetchedRequests: true,\n              requests: []\n            });\n          });\n          break;\n\n        default:\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var language = this.props.language;\n      var _this$state3 = this.state,\n          requests_type = _this$state3.requests_type,\n          fetchedRequests = _this$state3.fetchedRequests,\n          requests = _this$state3.requests;\n      var texts = Texts[language].pendingRequestsScreen;\n      var backNavTitle;\n\n      if (requests_type === \"user_groups\") {\n        backNavTitle = texts.invites;\n      } else if (requests_type === \"group_members\") {\n        backNavTitle = texts.requests;\n      } else {\n        backNavTitle = texts.activities;\n      }\n\n      var rowStyle = {\n        height: \"7rem\"\n      };\n      var confirmStyle = {\n        backgroundColor: \"#00838F\",\n        color: \"#ffffff\"\n      };\n      return fetchedRequests ? /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(BackNavigation, {\n        title: backNavTitle,\n        onClick: function onClick() {\n          return _this3.handleGoBack();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"ul\", {\n        id: \"groupMembersRequestsContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 9\n        }\n      }, requests.map(function (request, index) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: index,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"row no-gutters\",\n          style: rowStyle,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-2-10\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 17\n          }\n        }, _this3.renderAvatar(request)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-4-10\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 17\n          }\n        }, _this3.renderName(request)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-2-10\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          className: \"center confirmRequestButton\",\n          style: confirmStyle,\n          onClick: function onClick() {\n            return _this3.handleConfirm(request);\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 19\n          }\n        }, texts.confirm)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-2-10\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          type: \"button\",\n          className: \"center deleteRequestButton\",\n          onClick: function onClick() {\n            return _this3.handleDelete(request);\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 19\n          }\n        }, texts.delete))));\n      }))) : /*#__PURE__*/React.createElement(LoadingSpinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return PendingRequestsScreen;\n}(React.Component);\n\nPendingRequestsScreen.propTypes = {\n  history: PropTypes.object,\n  language: PropTypes.string,\n  match: PropTypes.object\n};\nexport default withLanguage(PendingRequestsScreen);","map":{"version":3,"sources":["C:/Users/nucle/Documents/GitHub/Green-Wizards/client/src/components/PendingRequestsScreen.js"],"names":["React","axios","PropTypes","path","BackNavigation","Texts","withLanguage","LoadingSpinner","Avatar","Log","PendingRequestsScreen","props","handleConfirm","request","state","requests_type","requests","match","groupId","params","filteredUsers","filter","req","user_id","patch","group_accepted","id","then","response","info","setState","catch","error","userId","JSON","parse","localStorage","getItem","filteredGroups","group_id","filteredActivities","activity_id","status","handleDelete","delete","filterdActivities","renderAvatar","history","push","fontSize","color","renderName","requestName","route","family_name","given_name","name","cursor","handleGoBack","length","replace","goBack","pathname","location","includes","fetchedRequests","get","res","data","member","user_accepted","profileIds","map","ids","searchBy","profiles","groupIds","groups","activities","activity","language","texts","pendingRequestsScreen","backNavTitle","invites","rowStyle","height","confirmStyle","backgroundColor","index","confirm","Component","propTypes","object","string"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as path from \"lodash.get\";\r\nimport BackNavigation from \"./BackNavigation\";\r\nimport Texts from \"../Constants/Texts\";\r\nimport withLanguage from \"./LanguageContext\";\r\nimport LoadingSpinner from \"./LoadingSpinner\";\r\nimport Avatar from \"./Avatar\";\r\nimport Log from \"./Log\";\r\n\r\nclass PendingRequestsScreen extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let requests_type;\r\n    const { history } = this.props;\r\n    const { pathname } = history.location;\r\n    if (pathname.includes(\"members\")) {\r\n      requests_type = \"group_members\";\r\n    } else if (pathname.includes(\"invites\")) {\r\n      requests_type = \"user_groups\";\r\n    } else {\r\n      requests_type = \"group_activities\";\r\n    }\r\n    this.state = {\r\n      fetchedRequests: false,\r\n      requests_type\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { match } = this.props;\r\n    const { groupId } = match.params;\r\n    const { requests_type } = this.state;\r\n    const userId = JSON.parse(localStorage.getItem(\"user\")).id;\r\n    switch (requests_type) {\r\n      case \"group_members\":\r\n        axios\r\n          .get(`/api/groups/${groupId}/members`)\r\n          .then(res => {\r\n            const requests = res.data.filter(\r\n              member => !member.group_accepted && member.user_accepted\r\n            );\r\n            const profileIds = requests.map(request => request.user_id);\r\n            return axios.get(\"/api/profiles\", {\r\n              params: {\r\n                ids: profileIds,\r\n                searchBy: \"ids\"\r\n              }\r\n            });\r\n          })\r\n          .then(res => {\r\n            const profiles = res.data;\r\n            this.setState({ fetchedRequests: true, requests: profiles });\r\n          })\r\n          .catch(error => {\r\n            Log.error(error);\r\n            this.setState({ fetchedRequests: true, requests: [] });\r\n          });\r\n        break;\r\n      case \"user_groups\":\r\n        axios\r\n          .get(`/api/users/${userId}/groups`)\r\n          .then(res => {\r\n            const requests = res.data.filter(\r\n              member => member.group_accepted && !member.user_accepted\r\n            );\r\n            const groupIds = requests.map(request => request.group_id);\r\n            return axios.get(\"/api/groups\", {\r\n              params: {\r\n                ids: groupIds,\r\n                searchBy: \"ids\"\r\n              }\r\n            });\r\n          })\r\n          .then(res => {\r\n            const groups = res.data;\r\n            this.setState({ fetchedRequests: true, requests: groups });\r\n          })\r\n          .catch(error => {\r\n            Log.error(error);\r\n            this.setState({ fetchedRequests: true, requests: [] });\r\n          });\r\n        break;\r\n      case \"group_activities\":\r\n        axios\r\n          .get(`/api/groups/${groupId}/activities`)\r\n          .then(res => {\r\n            const activities = res.data.filter(\r\n              activity => activity.status === \"pending\"\r\n            );\r\n            this.setState({ fetchedRequests: true, requests: activities });\r\n          })\r\n          .catch(error => {\r\n            Log.error(error);\r\n            this.setState({ fetchedRequests: true, requests: [] });\r\n          });\r\n        break;\r\n      default:\r\n    }\r\n  }\r\n\r\n  handleConfirm = request => {\r\n    const { requests_type, requests } = this.state;\r\n    const { match } = this.props;\r\n    const { groupId } = match.params;\r\n    switch (requests_type) {\r\n      case \"group_members\":\r\n        const filteredUsers = requests.filter(\r\n          req => req.user_id !== request.user_id\r\n        );\r\n        axios\r\n          .patch(`/api/groups/${groupId}/members`, {\r\n            patch: { group_accepted: true },\r\n            id: request.user_id\r\n          })\r\n          .then(response => {\r\n            Log.info(response);\r\n            this.setState({ requests: filteredUsers });\r\n          })\r\n          .catch(error => {\r\n            Log.error(error);\r\n          });\r\n        break;\r\n      case \"user_groups\":\r\n        const userId = JSON.parse(localStorage.getItem(\"user\")).id;\r\n        const filteredGroups = requests.filter(\r\n          req => req.group_id !== request.group_id\r\n        );\r\n        axios\r\n          .patch(`/api/users/${userId}/groups/${request.group_id}`)\r\n          .then(response => {\r\n            Log.info(response);\r\n            this.setState({ requests: filteredGroups });\r\n          })\r\n          .catch(error => {\r\n            Log.error(error);\r\n          });\r\n        break;\r\n      case \"group_activities\":\r\n        const filteredActivities = requests.filter(\r\n          req => req.activity_id !== request.activity_id\r\n        );\r\n        axios\r\n          .patch(`/api/groups/${groupId}/activities/${request.activity_id}`, {\r\n            status: \"accepted\"\r\n          })\r\n          .then(response => {\r\n            Log.info(response);\r\n            this.setState({ requests: filteredActivities });\r\n          })\r\n          .catch(error => {\r\n            Log.error(error);\r\n          });\r\n        break;\r\n      default:\r\n    }\r\n  };\r\n\r\n  handleDelete = request => {\r\n    const { requests_type, requests } = this.state;\r\n    const { match } = this.props;\r\n    const { groupId } = match.params;\r\n    switch (requests_type) {\r\n      case \"group_members\":\r\n        const filteredUsers = requests.filter(\r\n          req => req.user_id !== request.user_id\r\n        );\r\n        axios\r\n          .delete(`/api/groups/${groupId}/members/${request.user_id}`)\r\n          .then(response => {\r\n            Log.info(response);\r\n            this.setState({ requests: filteredUsers });\r\n          })\r\n          .catch(error => {\r\n            Log.error(error);\r\n          });\r\n        break;\r\n      case \"user_groups\":\r\n        const userId = JSON.parse(localStorage.getItem(\"user\")).id;\r\n        const filteredGroups = requests.filter(\r\n          req => req.group_id !== request.group_id\r\n        );\r\n        axios\r\n          .delete(`/api/users/${userId}/groups/${request.group_id}`)\r\n          .then(response => {\r\n            Log.info(response);\r\n            this.setState({ requests: filteredGroups });\r\n          })\r\n          .catch(error => {\r\n            Log.error(error);\r\n          });\r\n        break;\r\n      case \"group_activities\":\r\n        const filterdActivities = requests.filter(\r\n          req => req.activity_id !== request.activity_id\r\n        );\r\n        axios\r\n          .delete(`/api/groups/${groupId}/activities/${request.activity_id}`)\r\n          .then(response => {\r\n            Log.info(response);\r\n            this.setState({ requests: filterdActivities });\r\n          })\r\n          .catch(error => {\r\n            Log.error(error);\r\n          });\r\n        break;\r\n      default:\r\n    }\r\n  };\r\n\r\n  renderAvatar = request => {\r\n    const { history } = this.props;\r\n    const { requests_type } = this.state;\r\n    switch (requests_type) {\r\n      case \"group_members\":\r\n        return (\r\n          <Avatar\r\n            className=\"verticalCenter\"\r\n            thumbnail={path(request, [\"image\", \"path\"])}\r\n            route={`/profiles/${request.user_id}/info`}\r\n          />\r\n        );\r\n      case \"user_groups\":\r\n        return (\r\n          <Avatar\r\n            className=\"verticalCenter\"\r\n            thumbnail={path(request, [\"image\", \"path\"])}\r\n            route={`/groups/${request.group_id}/info`}\r\n          />\r\n        );\r\n      case \"group_activities\":\r\n        return (\r\n          <i\r\n            role=\"button\"\r\n            tabIndex={-42}\r\n            onClick={() =>\r\n              history.push(\r\n                `/groups/${request.group_id}/activities/${request.activity_id}`\r\n              )\r\n            }\r\n            style={{\r\n              fontSize: \"3rem\",\r\n              color: request.color\r\n            }}\r\n            className=\"fas fa-certificate center\"\r\n          />\r\n        );\r\n      default:\r\n        return <div />;\r\n    }\r\n  };\r\n\r\n  renderName = request => {\r\n    const { requests_type } = this.state;\r\n    const { history } = this.props;\r\n    let requestName;\r\n    let route;\r\n    if (requests_type === \"group_members\") {\r\n      requestName = `${request.family_name} ${request.given_name[0]}.`;\r\n      route = `/profiles/${request.user_id}/info`;\r\n    } else if (requests_type === \"user_groups\") {\r\n      requestName = request.name;\r\n      route = `/groups/${request.group_id}/activities`;\r\n    } else {\r\n      requestName = request.name;\r\n      route = `/groups/${request.group_id}/activities/${request.activity_id}`;\r\n    }\r\n    return (\r\n      <h1\r\n        style={{ cursor: \"pointer\" }}\r\n        className=\"verticalCenter\"\r\n        onClick={() => {\r\n          history.push(route);\r\n        }}\r\n      >\r\n        {requestName}\r\n      </h1>\r\n    );\r\n  };\r\n\r\n  handleGoBack = () => {\r\n    const { history } = this.props;\r\n    if (history.length === 1) {\r\n      history.replace(\"/myfamiliesshare\");\r\n    } else {\r\n      history.goBack();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { language } = this.props;\r\n    const { requests_type, fetchedRequests, requests } = this.state;\r\n    const texts = Texts[language].pendingRequestsScreen;\r\n    let backNavTitle;\r\n    if (requests_type === \"user_groups\") {\r\n      backNavTitle = texts.invites;\r\n    } else if (requests_type === \"group_members\") {\r\n      backNavTitle = texts.requests;\r\n    } else {\r\n      backNavTitle = texts.activities;\r\n    }\r\n    const rowStyle = { height: \"7rem\" };\r\n    const confirmStyle = { backgroundColor: \"#00838F\", color: \"#ffffff\" };\r\n    return fetchedRequests ? (\r\n      <React.Fragment>\r\n        <BackNavigation\r\n          title={backNavTitle}\r\n          onClick={() => this.handleGoBack()}\r\n        />\r\n        <ul id=\"groupMembersRequestsContainer\">\r\n          {requests.map((request, index) => (\r\n            <li key={index}>\r\n              <div className=\"row no-gutters\" style={rowStyle}>\r\n                <div className=\"col-2-10\">{this.renderAvatar(request)}</div>\r\n                <div className=\"col-4-10\">{this.renderName(request)}</div>\r\n                <div className=\"col-2-10\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"center confirmRequestButton\"\r\n                    style={confirmStyle}\r\n                    onClick={() => this.handleConfirm(request)}\r\n                  >\r\n                    {texts.confirm}\r\n                  </button>\r\n                </div>\r\n                <div className=\"col-2-10\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"center deleteRequestButton\"\r\n                    onClick={() => this.handleDelete(request)}\r\n                  >\r\n                    {texts.delete}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </React.Fragment>\r\n    ) : (\r\n      <LoadingSpinner />\r\n    );\r\n  }\r\n}\r\n\r\nPendingRequestsScreen.propTypes = {\r\n  history: PropTypes.object,\r\n  language: PropTypes.string,\r\n  match: PropTypes.object\r\n};\r\n\r\nexport default withLanguage(PendingRequestsScreen);\r\n"]},"metadata":{},"sourceType":"module"}