{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\src\\\\components\\\\ProfileHeader.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { withSnackbar } from \"notistack\";\nimport PropTypes from \"prop-types\";\nimport { disableBodyScroll, clearAllBodyScrollLocks } from \"body-scroll-lock\";\nimport OptionsModal from \"./OptionsModal\";\nimport withLanguage from \"./LanguageContext\";\nimport Texts from \"../Constants/Texts\";\nimport ConfirmDialog from \"./ConfirmDialog\";\nimport ExpandedImageModal from \"./ExpandedImageModal\";\nimport Log from \"./Log\";\n\nvar ProfileHeader = /*#__PURE__*/function (_React$Component) {\n  _inherits(ProfileHeader, _React$Component);\n\n  var _super = _createSuper(ProfileHeader);\n\n  function ProfileHeader() {\n    var _this;\n\n    _classCallCheck(this, ProfileHeader);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      optionsModalIsOpen: false,\n      confirmDialogIsOpen: false,\n      action: \"\",\n      imageModalIsOpen: false\n    };\n\n    _this.handleImageModalOpen = function () {\n      var target = document.querySelector(\".ReactModalPortal\");\n      disableBodyScroll(target);\n\n      _this.setState({\n        imageModalIsOpen: true\n      });\n    };\n\n    _this.handleImageModalClose = function () {\n      clearAllBodyScrollLocks();\n\n      _this.setState({\n        imageModalIsOpen: false\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        optionsModalIsOpen: false\n      });\n    };\n\n    _this.handleEdit = function () {\n      var history = _this.props.history;\n      var pathname = history.location.pathname;\n      var parentPath = pathname.slice(0, pathname.lastIndexOf(\"/\"));\n      var newPath = \"\".concat(parentPath, \"/edit\");\n      history.push(newPath);\n    };\n\n    _this.handleOptions = function () {\n      var optionsModalIsOpen = _this.state.optionsModalIsOpen;\n\n      _this.setState({\n        optionsModalIsOpen: !optionsModalIsOpen\n      });\n    };\n\n    _this.handleExport = function () {\n      var _this$props = _this.props,\n          match = _this$props.match,\n          enqueueSnackbar = _this$props.enqueueSnackbar,\n          language = _this$props.language;\n      var userId = match.params.profileId;\n      var texts = Texts[language].profileHeader;\n      axios.post(\"/api/users/\".concat(userId, \"/export\")).then(function (response) {\n        enqueueSnackbar(texts.exportSuccess, {\n          variant: \"info\"\n        });\n        Log.info(response);\n      }).catch(function (error) {\n        Log.error(error);\n      });\n    };\n\n    _this.handleDelete = function () {\n      var _this$props2 = _this.props,\n          match = _this$props2.match,\n          history = _this$props2.history;\n      var userId = match.params.profileId;\n      axios.delete(\"/api/users/\".concat(userId)).then(function (response) {\n        Log.info(response);\n        if (window.isNative) window.ReactNativeWebView.postMessage(JSON.stringify({\n          action: \"googleLogout\"\n        }));\n        localStorage.removeItem(\"user\");\n        history.push(\"/\");\n      }).catch(function (error) {\n        Log.error(error);\n      });\n    };\n\n    _this.handleSuspend = function () {\n      var _this$props3 = _this.props,\n          match = _this$props3.match,\n          language = _this$props3.language,\n          enqueueSnackbar = _this$props3.enqueueSnackbar,\n          history = _this$props3.history;\n      var userId = match.params.profileId;\n      var texts = Texts[language].profileHeader;\n      axios.post(\"/api/users/\".concat(userId, \"/suspend\")).then(function (response) {\n        enqueueSnackbar(texts.suspendSuccess, {\n          variant: \"info\"\n        });\n        setTimeout(function () {\n          Log.info(response);\n          localStorage.removeItem(\"user\");\n          history.push(\"/\");\n        }, 2000);\n      }).catch(function (error) {\n        Log.error(error);\n        enqueueSnackbar(texts.error, {\n          variant: \"error\"\n        });\n      });\n    };\n\n    _this.handleBackNav = function () {\n      var history = _this.props.history;\n      history.goBack();\n    };\n\n    _this.handleConfirmDialogOpen = function (action) {\n      _this.setState({\n        confirmDialogIsOpen: true,\n        optionsModalIsOpen: false,\n        action: action\n      });\n    };\n\n    _this.handleConfirmDialogClose = function (choice) {\n      var action = _this.state.action;\n\n      if (choice === \"agree\") {\n        switch (action) {\n          case \"delete\":\n            _this.handleDelete();\n\n            break;\n\n          case \"export\":\n            _this.handleExport();\n\n            break;\n\n          case \"suspend\":\n            _this.handleSuspend();\n\n            break;\n\n          default:\n        }\n      }\n\n      _this.setState({\n        confirmDialogIsOpen: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ProfileHeader, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          language = _this$props4.language,\n          match = _this$props4.match,\n          history = _this$props4.history,\n          photo = _this$props4.photo,\n          name = _this$props4.name;\n      var profileId = match.params.profileId;\n      var texts = Texts[language].profileHeader;\n      var _this$state = this.state,\n          optionsModalIsOpen = _this$state.optionsModalIsOpen,\n          confirmDialogIsOpen = _this$state.confirmDialogIsOpen,\n          action = _this$state.action,\n          imageModalIsOpen = _this$state.imageModalIsOpen;\n      var confirmDialogTitle;\n\n      switch (action) {\n        case \"delete\":\n          confirmDialogTitle = texts.deleteDialogTitle;\n          break;\n\n        case \"export\":\n          confirmDialogTitle = texts.exportDialogTitle;\n          break;\n\n        case \"suspend\":\n          confirmDialogTitle = texts.suspendDialogTitle;\n          break;\n\n        default:\n      }\n\n      var options = [{\n        label: texts.delete,\n        style: \"optionsModalButton\",\n        handle: function handle() {\n          _this2.handleConfirmDialogOpen(\"delete\");\n        }\n      }, // {\n      //   label: texts.suspend,\n      //   style: \"optionsModalButton\",\n      //   handle: () => {\n      //     this.handleConfirmDialogOpen(\"suspend\");\n      //   }\n      // },\n      {\n        label: texts.export,\n        style: \"optionsModalButton\",\n        handle: function handle() {\n          _this2.handleConfirmDialogOpen(\"export\");\n        }\n      }];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: \"profileHeaderContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        id: \"profileHeaderOptions\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton center\",\n        onClick: function onClick() {\n          return history.goBack();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-arrow-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-6-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }\n      }), profileId === JSON.parse(localStorage.getItem(\"user\")).id ? /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-1-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton center\",\n        onClick: this.handleEdit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-pencil-alt\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 19\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-1-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton center\",\n        onClick: this.handleOptions,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-ellipsis-v\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 19\n        }\n      })))) : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"img\", {\n        className: \"profilePhoto horizontalCenter\",\n        alt: \"user's profile\",\n        src: photo,\n        onClick: this.handleImageModalOpen,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"horizontalCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 9\n        }\n      }, name), /*#__PURE__*/React.createElement(ExpandedImageModal, {\n        isOpen: imageModalIsOpen,\n        handleClose: this.handleImageModalClose,\n        image: photo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(OptionsModal, {\n        isOpen: optionsModalIsOpen,\n        handleClose: this.handleClose,\n        options: options,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(ConfirmDialog, {\n        title: confirmDialogTitle,\n        isOpen: confirmDialogIsOpen,\n        handleClose: this.handleConfirmDialogClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return ProfileHeader;\n}(React.Component);\n\nProfileHeader.propTypes = {\n  history: PropTypes.object,\n  name: PropTypes.string,\n  photo: PropTypes.string,\n  language: PropTypes.string,\n  match: PropTypes.object,\n  enqueueSnackbar: PropTypes.func\n};\nexport default withRouter(withLanguage(withSnackbar(ProfileHeader)));","map":{"version":3,"sources":["C:/Users/nucle/Documents/GitHub/Families_Share-platform/client/src/components/ProfileHeader.js"],"names":["React","withRouter","axios","withSnackbar","PropTypes","disableBodyScroll","clearAllBodyScrollLocks","OptionsModal","withLanguage","Texts","ConfirmDialog","ExpandedImageModal","Log","ProfileHeader","state","optionsModalIsOpen","confirmDialogIsOpen","action","imageModalIsOpen","handleImageModalOpen","target","document","querySelector","setState","handleImageModalClose","handleClose","handleEdit","history","props","pathname","location","parentPath","slice","lastIndexOf","newPath","push","handleOptions","handleExport","match","enqueueSnackbar","language","userId","params","profileId","texts","profileHeader","post","then","response","exportSuccess","variant","info","catch","error","handleDelete","delete","window","isNative","ReactNativeWebView","postMessage","JSON","stringify","localStorage","removeItem","handleSuspend","suspendSuccess","setTimeout","handleBackNav","goBack","handleConfirmDialogOpen","handleConfirmDialogClose","choice","photo","name","confirmDialogTitle","deleteDialogTitle","exportDialogTitle","suspendDialogTitle","options","label","style","handle","export","parse","getItem","id","Component","propTypes","object","string","func"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { withSnackbar } from \"notistack\";\r\nimport PropTypes from \"prop-types\";\r\nimport { disableBodyScroll, clearAllBodyScrollLocks } from \"body-scroll-lock\";\r\nimport OptionsModal from \"./OptionsModal\";\r\nimport withLanguage from \"./LanguageContext\";\r\nimport Texts from \"../Constants/Texts\";\r\nimport ConfirmDialog from \"./ConfirmDialog\";\r\nimport ExpandedImageModal from \"./ExpandedImageModal\";\r\nimport Log from \"./Log\";\r\n\r\nclass ProfileHeader extends React.Component {\r\n  state = {\r\n    optionsModalIsOpen: false,\r\n    confirmDialogIsOpen: false,\r\n    action: \"\",\r\n    imageModalIsOpen: false\r\n  };\r\n\r\n  handleImageModalOpen = () => {\r\n    const target = document.querySelector(\".ReactModalPortal\");\r\n    disableBodyScroll(target);\r\n    this.setState({ imageModalIsOpen: true });\r\n  };\r\n\r\n  handleImageModalClose = () => {\r\n    clearAllBodyScrollLocks();\r\n    this.setState({ imageModalIsOpen: false });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ optionsModalIsOpen: false });\r\n  };\r\n\r\n  handleEdit = () => {\r\n    const { history } = this.props;\r\n    const { pathname } = history.location;\r\n    const parentPath = pathname.slice(0, pathname.lastIndexOf(\"/\"));\r\n    const newPath = `${parentPath}/edit`;\r\n    history.push(newPath);\r\n  };\r\n\r\n  handleOptions = () => {\r\n    const { optionsModalIsOpen } = this.state;\r\n    this.setState({ optionsModalIsOpen: !optionsModalIsOpen });\r\n  };\r\n\r\n  handleExport = () => {\r\n    const { match, enqueueSnackbar, language } = this.props;\r\n    const { profileId: userId } = match.params;\r\n    const texts = Texts[language].profileHeader;\r\n    axios\r\n      .post(`/api/users/${userId}/export`)\r\n      .then(response => {\r\n        enqueueSnackbar(texts.exportSuccess, { variant: \"info\" });\r\n        Log.info(response);\r\n      })\r\n      .catch(error => {\r\n        Log.error(error);\r\n      });\r\n  };\r\n\r\n  handleDelete = () => {\r\n    const { match, history } = this.props;\r\n    const { profileId: userId } = match.params;\r\n    axios\r\n      .delete(`/api/users/${userId}`)\r\n      .then(response => {\r\n        Log.info(response);\r\n        if (window.isNative)\r\n          window.ReactNativeWebView.postMessage(\r\n            JSON.stringify({ action: \"googleLogout\" })\r\n          );\r\n        localStorage.removeItem(\"user\");\r\n        history.push(\"/\");\r\n      })\r\n      .catch(error => {\r\n        Log.error(error);\r\n      });\r\n  };\r\n\r\n  handleSuspend = () => {\r\n    const { match, language, enqueueSnackbar, history } = this.props;\r\n    const { profileId: userId } = match.params;\r\n    const texts = Texts[language].profileHeader;\r\n    axios\r\n      .post(`/api/users/${userId}/suspend`)\r\n      .then(response => {\r\n        enqueueSnackbar(texts.suspendSuccess, { variant: \"info\" });\r\n        setTimeout(() => {\r\n          Log.info(response);\r\n          localStorage.removeItem(\"user\");\r\n          history.push(\"/\");\r\n        }, 2000);\r\n      })\r\n      .catch(error => {\r\n        Log.error(error);\r\n        enqueueSnackbar(texts.error, { variant: \"error\" });\r\n      });\r\n  };\r\n\r\n  handleBackNav = () => {\r\n    const { history } = this.props;\r\n    history.goBack();\r\n  };\r\n\r\n  handleConfirmDialogOpen = action => {\r\n    this.setState({\r\n      confirmDialogIsOpen: true,\r\n      optionsModalIsOpen: false,\r\n      action\r\n    });\r\n  };\r\n\r\n  handleConfirmDialogClose = choice => {\r\n    const { action } = this.state;\r\n    if (choice === \"agree\") {\r\n      switch (action) {\r\n        case \"delete\":\r\n          this.handleDelete();\r\n          break;\r\n        case \"export\":\r\n          this.handleExport();\r\n          break;\r\n        case \"suspend\":\r\n          this.handleSuspend();\r\n          break;\r\n        default:\r\n      }\r\n    }\r\n    this.setState({ confirmDialogIsOpen: false });\r\n  };\r\n\r\n  render() {\r\n    const { language, match, history, photo, name } = this.props;\r\n    const { profileId } = match.params;\r\n    const texts = Texts[language].profileHeader;\r\n    const {\r\n      optionsModalIsOpen,\r\n      confirmDialogIsOpen,\r\n      action,\r\n      imageModalIsOpen\r\n    } = this.state;\r\n    let confirmDialogTitle;\r\n    switch (action) {\r\n      case \"delete\":\r\n        confirmDialogTitle = texts.deleteDialogTitle;\r\n        break;\r\n      case \"export\":\r\n        confirmDialogTitle = texts.exportDialogTitle;\r\n        break;\r\n      case \"suspend\":\r\n        confirmDialogTitle = texts.suspendDialogTitle;\r\n        break;\r\n      default:\r\n    }\r\n    const options = [\r\n      {\r\n        label: texts.delete,\r\n        style: \"optionsModalButton\",\r\n        handle: () => {\r\n          this.handleConfirmDialogOpen(\"delete\");\r\n        }\r\n      },\r\n      // {\r\n      //   label: texts.suspend,\r\n      //   style: \"optionsModalButton\",\r\n      //   handle: () => {\r\n      //     this.handleConfirmDialogOpen(\"suspend\");\r\n      //   }\r\n      // },\r\n      {\r\n        label: texts.export,\r\n        style: \"optionsModalButton\",\r\n        handle: () => {\r\n          this.handleConfirmDialogOpen(\"export\");\r\n        }\r\n      }\r\n    ];\r\n    return (\r\n      <div id=\"profileHeaderContainer\">\r\n        <div className=\"row no-gutters\" id=\"profileHeaderOptions\">\r\n          <div className=\"col-2-10\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"transparentButton center\"\r\n              onClick={() => history.goBack()}\r\n            >\r\n              <i className=\"fas fa-arrow-left\" />\r\n            </button>\r\n          </div>\r\n          <div className=\"col-6-10\" />\r\n          {profileId === JSON.parse(localStorage.getItem(\"user\")).id ? (\r\n            <React.Fragment>\r\n              <div className=\"col-1-10\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"transparentButton center\"\r\n                  onClick={this.handleEdit}\r\n                >\r\n                  <i className=\"fas fa-pencil-alt\" />\r\n                </button>\r\n              </div>\r\n              <div className=\"col-1-10\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"transparentButton center\"\r\n                  onClick={this.handleOptions}\r\n                >\r\n                  <i className=\"fas fa-ellipsis-v\" />\r\n                </button>\r\n              </div>\r\n            </React.Fragment>\r\n          ) : (\r\n            <div />\r\n          )}\r\n        </div>\r\n        <img\r\n          className=\"profilePhoto horizontalCenter\"\r\n          alt=\"user's profile\"\r\n          src={photo}\r\n          onClick={this.handleImageModalOpen}\r\n        />\r\n        <h1 className=\"horizontalCenter\">{name}</h1>\r\n        <ExpandedImageModal\r\n          isOpen={imageModalIsOpen}\r\n          handleClose={this.handleImageModalClose}\r\n          image={photo}\r\n        />\r\n        <OptionsModal\r\n          isOpen={optionsModalIsOpen}\r\n          handleClose={this.handleClose}\r\n          options={options}\r\n        />\r\n        <ConfirmDialog\r\n          title={confirmDialogTitle}\r\n          isOpen={confirmDialogIsOpen}\r\n          handleClose={this.handleConfirmDialogClose}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nProfileHeader.propTypes = {\r\n  history: PropTypes.object,\r\n  name: PropTypes.string,\r\n  photo: PropTypes.string,\r\n  language: PropTypes.string,\r\n  match: PropTypes.object,\r\n  enqueueSnackbar: PropTypes.func\r\n};\r\n\r\nexport default withRouter(withLanguage(withSnackbar(ProfileHeader)));\r\n"]},"metadata":{},"sourceType":"module"}