{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Green-Wizards\\\\client\\\\src\\\\components\\\\GroupActivities.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nimport Fab from \"@material-ui/core/Fab\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport withLanguage from \"./LanguageContext\";\nimport Texts from \"../Constants/Texts\";\nimport ActivityOptionsModal from \"./OptionsModal\";\nimport ActivityListItem from \"./ActivityListItem\";\nimport PlanListItem from \"./PlanListItem\";\nimport ConfirmDialog from \"./ConfirmDialog\";\nimport Log from \"./Log\";\nvar styles = {\n  add: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n    height: \"5rem\",\n    width: \"5rem\",\n    borderRadius: \"50%\",\n    border: \"solid 0.5px #999\",\n    backgroundColor: \"#ff6f00\",\n    zIndex: 100,\n    fontSize: \"2rem\"\n  },\n  addPlan: {\n    right: \"0.5rem\",\n    height: \"4rem\",\n    width: \"4rem\",\n    borderRadius: \"50%\",\n    border: \"solid 0.5px #999\",\n    backgroundColor: \"#ff6f00\",\n    zIndex: 100,\n    fontSize: \"2rem\"\n  },\n  addActivity: {\n    right: \"0.5rem\",\n    height: \"4rem\",\n    width: \"4rem\",\n    borderRadius: \"50%\",\n    border: \"solid 0.5px #999\",\n    backgroundColor: \"#ff6f00\",\n    zIndex: 100,\n    fontSize: \"2rem\"\n  }\n};\n\nvar fetchActivites = function fetchActivites(groupId) {\n  return axios.get(\"/api/groups/\".concat(groupId, \"/activities\")).then(function (response) {\n    return response.data;\n  }).catch(function (error) {\n    Log.error(error);\n    return [];\n  });\n};\n\nvar fetchPlans = function fetchPlans(groupId) {\n  return axios.get(\"/api/groups/\".concat(groupId, \"/plans\")).then(function (response) {\n    return response.data;\n  }).catch(function (error) {\n    Log.error(error);\n    return [];\n  });\n};\n\nvar GroupActivities = /*#__PURE__*/function (_React$Component) {\n  _inherits(GroupActivities, _React$Component);\n\n  var _super = _createSuper(GroupActivities);\n\n  function GroupActivities(props) {\n    var _this;\n\n    _classCallCheck(this, GroupActivities);\n\n    _this = _super.call(this, props);\n\n    _this.add = function (type) {\n      var history = _this.props.history;\n      var groupId = _this.state.group.group_id;\n      var path = \"/groups/\".concat(groupId, \"/\").concat(type, \"/create\");\n      history.push(path);\n    };\n\n    _this.toggleAdd = function () {\n      var showAddOptions = _this.state.showAddOptions;\n\n      _this.setState({\n        showAddOptions: !showAddOptions\n      });\n    };\n\n    _this.renderActivities = function () {\n      var _this$state = _this.state,\n          group = _this$state.group,\n          activities = _this$state.activities;\n      var groupId = group.group_id;\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 7\n        }\n      }, activities.map(function (activity, index) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: index,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(ActivityListItem, {\n          activity: activity,\n          groupId: groupId,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }\n        }));\n      }));\n    };\n\n    _this.renderPlans = function () {\n      var _this$state2 = _this.state,\n          group = _this$state2.group,\n          plans = _this$state2.plans;\n      var groupId = group.group_id;\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }\n      }, plans.map(function (plan, index) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: index,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(PlanListItem, {\n          plan: plan,\n          groupId: groupId,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }\n        }));\n      }));\n    };\n\n    _this.handleModalOpen = function () {\n      _this.setState({\n        optionsModalIsOpen: true\n      });\n    };\n\n    _this.handleModalClose = function () {\n      _this.setState({\n        optionsModalIsOpen: false\n      });\n    };\n\n    _this.handleExport = function () {\n      var group = _this.state.group;\n      var groupId = group.group_id;\n\n      _this.setState({\n        optionsModalIsOpen: false\n      });\n\n      axios.post(\"/api/groups/\".concat(groupId, \"/agenda/export\")).then(function (response) {\n        Log.info(response);\n      }).catch(function (error) {\n        Log.error(error);\n      });\n    };\n\n    _this.handlePendingRequests = function () {\n      var history = _this.props.history;\n      var group = _this.state.group;\n      var groupId = group.group_id;\n      history.push(\"/groups/\".concat(groupId, \"/activities/pending\"));\n    };\n\n    _this.handleConfirmDialogOpen = function () {\n      _this.setState({\n        confirmDialogIsOpen: true,\n        optionsModalIsOpen: false\n      });\n    };\n\n    _this.handleConfirmDialogClose = function (choice) {\n      if (choice === \"agree\") {\n        _this.handleExport();\n      }\n\n      _this.setState({\n        confirmDialogIsOpen: false\n      });\n    };\n\n    var _group = _this.props.group;\n    _this.state = {\n      group: _group,\n      showAddOptions: false,\n      fetchedData: false,\n      optionsModalIsOpen: false\n    };\n    return _this;\n  }\n\n  _createClass(GroupActivities, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var group, groupId, activities, plans, acceptedActivities, pendingActivities;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                group = this.state.group;\n                groupId = group.group_id;\n                _context.next = 4;\n                return fetchActivites(groupId);\n\n              case 4:\n                activities = _context.sent;\n                _context.next = 7;\n                return fetchPlans(groupId);\n\n              case 7:\n                plans = _context.sent;\n                acceptedActivities = activities.filter(function (activity) {\n                  return activity.status === \"accepted\";\n                });\n                pendingActivities = activities.length - acceptedActivities.length;\n                this.setState({\n                  confirmDialogIsOpen: false,\n                  fetchedData: true,\n                  activities: acceptedActivities,\n                  pendingActivities: pendingActivities,\n                  plans: plans\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          language = _this$props.language,\n          history = _this$props.history,\n          userIsAdmin = _this$props.userIsAdmin;\n      var _this$state3 = this.state,\n          optionsModalIsOpen = _this$state3.optionsModalIsOpen,\n          confirmDialogIsOpen = _this$state3.confirmDialogIsOpen,\n          group = _this$state3.group,\n          pendingActivities = _this$state3.pendingActivities,\n          showAddOptions = _this$state3.showAddOptions,\n          fetchedData = _this$state3.fetchedData,\n          plans = _this$state3.plans;\n      var name = group.name;\n      var texts = Texts[language].groupActivities;\n      var options = [{\n        label: texts.export,\n        style: \"optionsModalButton\",\n        handle: this.handleConfirmDialogOpen\n      }];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          paddingBottom: \"6rem\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ActivityOptionsModal, {\n        isOpen: optionsModalIsOpen,\n        options: options,\n        handleClose: this.handleModalClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(ConfirmDialog, {\n        title: texts.exportConfirm,\n        isOpen: confirmDialogIsOpen,\n        handleClose: this.handleConfirmDialogClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        id: \"groupMembersHeaderContainer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton center\",\n        onClick: function onClick() {\n          return history.goBack();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-arrow-left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-6-10 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"verticalCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }\n      }, name)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-1-10 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }\n      }, userIsAdmin && /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton center\",\n        onClick: this.handlePendingRequests,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-certificate\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 17\n        }\n      }, pendingActivities > 0 && /*#__PURE__*/React.createElement(\"span\", {\n        className: \"activities-badge\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 21\n        }\n      }, pendingActivities)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-1-10 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton center\",\n        onClick: this.handleModalOpen,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-ellipsis-v\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 15\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        style: {\n          bottom: \"8rem\",\n          right: \"7%\",\n          zIndex: 100,\n          position: \"fixed\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Fab, {\n        color: \"primary\",\n        \"aria-label\": \"Add\",\n        className: classes.add,\n        onClick: function onClick() {\n          return userIsAdmin ? _this2.toggleAdd() : _this2.add(\"activities\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: showAddOptions ? \"fas fa-times\" : \"fas fa-plus\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }\n      }))), showAddOptions && /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        style: {\n          bottom: \"14rem\",\n          right: \"7%\",\n          zIndex: 100,\n          position: \"fixed\",\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" activitiesFabLabel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 15\n        }\n      }, texts.newActivity), /*#__PURE__*/React.createElement(Fab, {\n        color: \"primary\",\n        \"aria-label\": \"addActivity\",\n        className: classes.addActivity,\n        onClick: function onClick() {\n          return _this2.add(\"activities\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-certificate\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row no-gutters\",\n        style: {\n          bottom: \"20rem\",\n          zIndex: 100,\n          position: \"fixed\",\n          right: \"7%\",\n          alignItems: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" activitiesFabLabel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 15\n        }\n      }, texts.newPlan), /*#__PURE__*/React.createElement(Fab, {\n        color: \"primary\",\n        \"aria-label\": \"addPlan\",\n        className: classes.addPlan,\n        onClick: function onClick() {\n          return _this2.add(\"plans\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-calendar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          paddingBottom: \"6rem\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 9\n        }\n      }, fetchedData && /*#__PURE__*/React.createElement(\"div\", {\n        id: \"groupActivitiesContainer\",\n        className: \"horizontalCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 15\n        }\n      }, texts.activitiesHeader), this.renderActivities()), fetchedData && plans.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n        id: \"groupActivitiesContainer\",\n        className: \"horizontalCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 15\n        }\n      }, texts.plansHeader), this.renderPlans())));\n    }\n  }]);\n\n  return GroupActivities;\n}(React.Component);\n\nGroupActivities.propTypes = {\n  group: PropTypes.object,\n  userIsAdmin: PropTypes.bool,\n  classes: PropTypes.object,\n  language: PropTypes.string,\n  history: PropTypes.object\n};\nexport default withStyles(styles)(withLanguage(GroupActivities));","map":{"version":3,"sources":["C:/Users/nucle/Documents/GitHub/Green-Wizards/client/src/components/GroupActivities.js"],"names":["React","PropTypes","axios","Fab","withStyles","withLanguage","Texts","ActivityOptionsModal","ActivityListItem","PlanListItem","ConfirmDialog","Log","styles","add","position","right","bottom","height","width","borderRadius","border","backgroundColor","zIndex","fontSize","addPlan","addActivity","fetchActivites","groupId","get","then","response","data","catch","error","fetchPlans","GroupActivities","props","type","history","state","group","group_id","path","push","toggleAdd","showAddOptions","setState","renderActivities","activities","map","activity","index","renderPlans","plans","plan","handleModalOpen","optionsModalIsOpen","handleModalClose","handleExport","post","info","handlePendingRequests","handleConfirmDialogOpen","confirmDialogIsOpen","handleConfirmDialogClose","choice","fetchedData","acceptedActivities","filter","status","pendingActivities","length","classes","language","userIsAdmin","name","texts","groupActivities","options","label","export","style","handle","paddingBottom","exportConfirm","goBack","alignItems","newActivity","newPlan","activitiesHeader","plansHeader","Component","propTypes","object","bool","string"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport axios from \"axios\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport withLanguage from \"./LanguageContext\";\r\nimport Texts from \"../Constants/Texts\";\r\nimport ActivityOptionsModal from \"./OptionsModal\";\r\nimport ActivityListItem from \"./ActivityListItem\";\r\nimport PlanListItem from \"./PlanListItem\";\r\nimport ConfirmDialog from \"./ConfirmDialog\";\r\nimport Log from \"./Log\";\r\n\r\nconst styles = {\r\n  add: {\r\n    position: \"absolute\",\r\n    right: 0,\r\n    bottom: 0,\r\n    height: \"5rem\",\r\n    width: \"5rem\",\r\n    borderRadius: \"50%\",\r\n    border: \"solid 0.5px #999\",\r\n    backgroundColor: \"#ff6f00\",\r\n    zIndex: 100,\r\n    fontSize: \"2rem\"\r\n  },\r\n  addPlan: {\r\n    right: \"0.5rem\",\r\n    height: \"4rem\",\r\n    width: \"4rem\",\r\n    borderRadius: \"50%\",\r\n    border: \"solid 0.5px #999\",\r\n    backgroundColor: \"#ff6f00\",\r\n    zIndex: 100,\r\n    fontSize: \"2rem\"\r\n  },\r\n  addActivity: {\r\n    right: \"0.5rem\",\r\n    height: \"4rem\",\r\n    width: \"4rem\",\r\n    borderRadius: \"50%\",\r\n    border: \"solid 0.5px #999\",\r\n    backgroundColor: \"#ff6f00\",\r\n    zIndex: 100,\r\n    fontSize: \"2rem\"\r\n  }\r\n};\r\n\r\nconst fetchActivites = groupId => {\r\n  return axios\r\n    .get(`/api/groups/${groupId}/activities`)\r\n    .then(response => {\r\n      return response.data;\r\n    })\r\n    .catch(error => {\r\n      Log.error(error);\r\n      return [];\r\n    });\r\n};\r\n\r\nconst fetchPlans = groupId => {\r\n  return axios\r\n    .get(`/api/groups/${groupId}/plans`)\r\n    .then(response => {\r\n      return response.data;\r\n    })\r\n    .catch(error => {\r\n      Log.error(error);\r\n      return [];\r\n    });\r\n};\r\n\r\nclass GroupActivities extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { group } = this.props;\r\n    this.state = {\r\n      group,\r\n      showAddOptions: false,\r\n      fetchedData: false,\r\n      optionsModalIsOpen: false\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { group } = this.state;\r\n    const { group_id: groupId } = group;\r\n    const activities = await fetchActivites(groupId);\r\n    const plans = await fetchPlans(groupId);\r\n    const acceptedActivities = activities.filter(\r\n      activity => activity.status === \"accepted\"\r\n    );\r\n    const pendingActivities = activities.length - acceptedActivities.length;\r\n    this.setState({\r\n      confirmDialogIsOpen: false,\r\n      fetchedData: true,\r\n      activities: acceptedActivities,\r\n      pendingActivities,\r\n      plans\r\n    });\r\n  }\r\n\r\n  add = type => {\r\n    const { history } = this.props;\r\n    const {\r\n      group: { group_id: groupId }\r\n    } = this.state;\r\n    const path = `/groups/${groupId}/${type}/create`;\r\n    history.push(path);\r\n  };\r\n\r\n  toggleAdd = () => {\r\n    const { showAddOptions } = this.state;\r\n    this.setState({ showAddOptions: !showAddOptions });\r\n  };\r\n\r\n  renderActivities = () => {\r\n    const { group, activities } = this.state;\r\n    const { group_id: groupId } = group;\r\n    return (\r\n      <ul>\r\n        {activities.map((activity, index) => (\r\n          <li key={index}>\r\n            <ActivityListItem activity={activity} groupId={groupId} />\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  renderPlans = () => {\r\n    const { group, plans } = this.state;\r\n    const { group_id: groupId } = group;\r\n    return (\r\n      <ul>\r\n        {plans.map((plan, index) => (\r\n          <li key={index}>\r\n            <PlanListItem plan={plan} groupId={groupId} />\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  handleModalOpen = () => {\r\n    this.setState({ optionsModalIsOpen: true });\r\n  };\r\n\r\n  handleModalClose = () => {\r\n    this.setState({ optionsModalIsOpen: false });\r\n  };\r\n\r\n  handleExport = () => {\r\n    const { group } = this.state;\r\n    const { group_id: groupId } = group;\r\n    this.setState({ optionsModalIsOpen: false });\r\n    axios\r\n      .post(`/api/groups/${groupId}/agenda/export`)\r\n      .then(response => {\r\n        Log.info(response);\r\n      })\r\n      .catch(error => {\r\n        Log.error(error);\r\n      });\r\n  };\r\n\r\n  handlePendingRequests = () => {\r\n    const { history } = this.props;\r\n    const { group } = this.state;\r\n    const { group_id: groupId } = group;\r\n    history.push(`/groups/${groupId}/activities/pending`);\r\n  };\r\n\r\n  handleConfirmDialogOpen = () => {\r\n    this.setState({ confirmDialogIsOpen: true, optionsModalIsOpen: false });\r\n  };\r\n\r\n  handleConfirmDialogClose = choice => {\r\n    if (choice === \"agree\") {\r\n      this.handleExport();\r\n    }\r\n    this.setState({ confirmDialogIsOpen: false });\r\n  };\r\n\r\n  render() {\r\n    const { classes, language, history, userIsAdmin } = this.props;\r\n    const {\r\n      optionsModalIsOpen,\r\n      confirmDialogIsOpen,\r\n      group,\r\n      pendingActivities,\r\n      showAddOptions,\r\n      fetchedData,\r\n      plans\r\n    } = this.state;\r\n    const { name } = group;\r\n    const texts = Texts[language].groupActivities;\r\n    const options = [\r\n      {\r\n        label: texts.export,\r\n        style: \"optionsModalButton\",\r\n        handle: this.handleConfirmDialogOpen\r\n      }\r\n    ];\r\n    return (\r\n      <div style={{ paddingBottom: \"6rem\" }}>\r\n        <ActivityOptionsModal\r\n          isOpen={optionsModalIsOpen}\r\n          options={options}\r\n          handleClose={this.handleModalClose}\r\n        />\r\n        <ConfirmDialog\r\n          title={texts.exportConfirm}\r\n          isOpen={confirmDialogIsOpen}\r\n          handleClose={this.handleConfirmDialogClose}\r\n        />\r\n        <div className=\"row no-gutters\" id=\"groupMembersHeaderContainer\">\r\n          <div className=\"col-2-10\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"transparentButton center\"\r\n              onClick={() => history.goBack()}\r\n            >\r\n              <i className=\"fas fa-arrow-left\" />\r\n            </button>\r\n          </div>\r\n          <div className=\"col-6-10 \">\r\n            <h1 className=\"verticalCenter\">{name}</h1>\r\n          </div>\r\n          <div className=\"col-1-10 \">\r\n            {userIsAdmin && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"transparentButton center\"\r\n                onClick={this.handlePendingRequests}\r\n              >\r\n                <i className=\"fas fa-certificate\">\r\n                  {pendingActivities > 0 && (\r\n                    <span className=\"activities-badge\">\r\n                      {pendingActivities}\r\n                    </span>\r\n                  )}\r\n                </i>\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div className=\"col-1-10 \">\r\n            <button\r\n              type=\"button\"\r\n              className=\"transparentButton center\"\r\n              onClick={this.handleModalOpen}\r\n            >\r\n              <i className=\"fas fa-ellipsis-v\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"row no-gutters\"\r\n          style={{\r\n            bottom: \"8rem\",\r\n            right: \"7%\",\r\n            zIndex: 100,\r\n            position: \"fixed\"\r\n          }}\r\n        >\r\n          <Fab\r\n            color=\"primary\"\r\n            aria-label=\"Add\"\r\n            className={classes.add}\r\n            onClick={() =>\r\n              userIsAdmin ? this.toggleAdd() : this.add(\"activities\")\r\n            }\r\n          >\r\n            <i className={showAddOptions ? \"fas fa-times\" : \"fas fa-plus\"} />\r\n          </Fab>\r\n        </div>\r\n        {showAddOptions && (\r\n          <React.Fragment>\r\n            <div\r\n              className=\"row no-gutters\"\r\n              style={{\r\n                bottom: \"14rem\",\r\n                right: \"7%\",\r\n                zIndex: 100,\r\n                position: \"fixed\",\r\n                alignItems: \"center\"\r\n              }}\r\n            >\r\n              <div className=\" activitiesFabLabel\">{texts.newActivity}</div>\r\n              <Fab\r\n                color=\"primary\"\r\n                aria-label=\"addActivity\"\r\n                className={classes.addActivity}\r\n                onClick={() => this.add(\"activities\")}\r\n              >\r\n                <i className=\"fas fa-certificate\" />\r\n              </Fab>\r\n            </div>\r\n            <div\r\n              className=\"row no-gutters\"\r\n              style={{\r\n                bottom: \"20rem\",\r\n                zIndex: 100,\r\n                position: \"fixed\",\r\n                right: \"7%\",\r\n                alignItems: \"center\"\r\n              }}\r\n            >\r\n              <div className=\" activitiesFabLabel\">{texts.newPlan}</div>\r\n              <Fab\r\n                color=\"primary\"\r\n                aria-label=\"addPlan\"\r\n                className={classes.addPlan}\r\n                onClick={() => this.add(\"plans\")}\r\n              >\r\n                <i className=\"fas fa-calendar\" />\r\n              </Fab>\r\n            </div>\r\n          </React.Fragment>\r\n        )}\r\n        <div style={{ paddingBottom: \"6rem\" }}>\r\n          {fetchedData && (\r\n            <div id=\"groupActivitiesContainer\" className=\"horizontalCenter\">\r\n              <h1 className=\"\">{texts.activitiesHeader}</h1>\r\n              {this.renderActivities()}\r\n            </div>\r\n          )}\r\n          {fetchedData && plans.length > 0 && (\r\n            <div id=\"groupActivitiesContainer\" className=\"horizontalCenter\">\r\n              <h1 className=\"\">{texts.plansHeader}</h1>\r\n              {this.renderPlans()}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nGroupActivities.propTypes = {\r\n  group: PropTypes.object,\r\n  userIsAdmin: PropTypes.bool,\r\n  classes: PropTypes.object,\r\n  language: PropTypes.string,\r\n  history: PropTypes.object\r\n};\r\n\r\nexport default withStyles(styles)(withLanguage(GroupActivities));\r\n"]},"metadata":{},"sourceType":"module"}