{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\nucle\\\\Documents\\\\GitHub\\\\Families_Share-platform\\\\client\\\\src\\\\components\\\\MemberContact.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\nimport { withRouter } from \"react-router-dom\";\nimport { withSnackbar } from \"notistack\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport * as path from \"lodash.get\";\nimport Texts from \"../Constants/Texts\";\nimport withLanguage from \"./LanguageContext\";\nimport Avatar from \"./Avatar\";\nimport MemberOptionsModal from \"./OptionsModal\";\nimport Log from \"./Log\";\n\nvar MemberContact = /*#__PURE__*/function (_React$Component) {\n  _inherits(MemberContact, _React$Component);\n\n  var _super = _createSuper(MemberContact);\n\n  function MemberContact() {\n    var _this;\n\n    _classCallCheck(this, MemberContact);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      modalIsOpen: false,\n      top: \"\",\n      right: \"\"\n    };\n\n    _this.handleRedirect = function (suspended, user_id) {\n      var history = _this.props.history;\n\n      if (!suspended) {\n        history.push(\"/profiles/\".concat(user_id, \"/info\"));\n      }\n    };\n\n    _this.handleClick = function (event) {\n      _this.setState({\n        modalIsOpen: true,\n        right: \"5%\",\n        top: event.clientY\n      });\n    };\n\n    _this.handleModalClose = function () {\n      _this.setState({\n        modalIsOpen: false,\n        top: \"\",\n        right: \"\"\n      });\n    };\n\n    _this.handleModalOpen = function () {\n      _this.setState({\n        modalIsOpen: true\n      });\n    };\n\n    _this.handleAddAdmin = function () {\n      var _this$props = _this.props,\n          groupId = _this$props.groupId,\n          member = _this$props.member,\n          handleAddAdmin = _this$props.handleAddAdmin;\n      var patch = {\n        admin: true\n      };\n      axios.patch(\"/api/groups/\".concat(groupId, \"/members\"), {\n        patch: patch,\n        id: member.user_id\n      }).then(function (response) {\n        handleAddAdmin(member.user_id);\n        Log.info(response);\n      }).catch(function (error) {\n        return Log.error(error);\n      });\n\n      _this.setState({\n        modalIsOpen: false\n      });\n    };\n\n    _this.handleRemoveAdmin = function () {\n      var _this$props2 = _this.props,\n          groupId = _this$props2.groupId,\n          member = _this$props2.member,\n          handleRemoveAdmin = _this$props2.handleRemoveAdmin;\n      var patch = {\n        admin: false\n      };\n      axios.patch(\"/api/groups/\".concat(groupId, \"/members\"), {\n        patch: patch,\n        id: member.user_id\n      }).then(function (response) {\n        handleRemoveAdmin(member.user_id);\n        Log.info(response);\n      }).catch(function (error) {\n        return Log.error(error);\n      });\n\n      _this.setState({\n        modalIsOpen: false\n      });\n    };\n\n    _this.handleRemoveUser = function () {\n      var _this$props3 = _this.props,\n          member = _this$props3.member,\n          handleRemoveUser = _this$props3.handleRemoveUser,\n          groupId = _this$props3.groupId;\n      var userId = member.user_id;\n      axios.delete(\"/api/groups/\".concat(groupId, \"/members/\").concat(userId)).then(function (response) {\n        handleRemoveUser(member.user_id);\n        Log.info(response);\n      }).catch(function (error) {\n        Log.error(error);\n      });\n\n      _this.setState({\n        modalIsOpen: false\n      });\n    };\n\n    _this.handlePhoneCall = function (number) {\n      var enqueueSnackbar = _this.props.enqueueSnackbar;\n\n      if (window.isNative) {\n        window.ReactNativeWebView.postMessage(JSON.stringify({\n          action: \"phoneCall\",\n          value: number\n        }));\n      } else {\n        enqueueSnackbar(\"Copied number to clipboard\", {\n          variant: \"info\"\n        });\n      }\n    };\n\n    _this.handleContact = function () {\n      var _this$props4 = _this.props,\n          contact = _this$props4.member.contact_option,\n          enqueueSnackbar = _this$props4.enqueueSnackbar;\n\n      if (window.isNative) {\n        window.ReactNativeWebView.postMessage(JSON.stringify({\n          action: \"send\".concat(contact),\n          value: _this.getContactValue()\n        }));\n      } else {\n        enqueueSnackbar(\"Copied e-mail to clipboard\", {\n          variant: \"info\"\n        });\n      }\n    };\n\n    _this.getContactValue = function () {\n      var _this$props$member = _this.props.member,\n          contact = _this$props$member.contact_option,\n          phone = _this$props$member.phone,\n          email = _this$props$member.email;\n      var value;\n\n      switch (contact) {\n        case \"viber\":\n        case \"whatsapp\":\n          value = phone;\n          break;\n\n        case \"email\":\n        default:\n          value = email;\n      }\n\n      return value;\n    };\n\n    _this.getContactIcon = function (contact) {\n      var icon;\n\n      switch (contact) {\n        case \"viber\":\n          icon = \"fab fa-viber\";\n          break;\n\n        case \"whatsapp\":\n          icon = \"fab fa-whatsapp\";\n          break;\n\n        case \"email\":\n        default:\n          icon = \"fas fa-envelope\";\n      }\n\n      if (window.isNative) {\n        return icon;\n      }\n\n      return \"fas fa-envelope\";\n    };\n\n    return _this;\n  }\n\n  _createClass(MemberContact, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props5 = this.props,\n          language = _this$props5.language,\n          profile = _this$props5.member,\n          userIsAdmin = _this$props5.userIsAdmin;\n      var _this$state = this.state,\n          top = _this$state.top,\n          right = _this$state.right,\n          modalIsOpen = _this$state.modalIsOpen;\n      var texts = Texts[language].memberContact;\n      var contact = profile.contact_option;\n      var options = [profile.admin ? {\n        label: texts.removeAdmin,\n        style: \"optionsModalButton\",\n        handle: this.handleRemoveAdmin\n      } : {\n        label: texts.addAdmin,\n        style: \"optionsModalButton\",\n        handle: this.handleAddAdmin\n      }, {\n        label: texts.removeUser,\n        style: \"optionsModalButton\",\n        handle: this.handleRemoveUser\n      }];\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(MemberOptionsModal, {\n        position: {\n          top: top,\n          right: right\n        },\n        options: options,\n        isOpen: modalIsOpen,\n        handleClose: this.handleModalClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"contactContainer\",\n        className: \"row no-gutters\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-2-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Avatar, {\n        thumbnail: path(profile, [\"image\", \"path\"]),\n        route: \"/profiles/\".concat(profile.user_id, \"/info\"),\n        disabled: profile.suspended,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-5-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        role: \"button\",\n        tabIndex: -42,\n        id: \"contactInfoContainer\",\n        className: \"center\",\n        onClick: function onClick() {\n          return _this2.handleRedirect(profile.suspended, profile.user_id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 15\n        }\n      }, \"\".concat(profile.given_name, \" \").concat(profile.family_name)), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 15\n        }\n      }, profile.admin ? texts.administrator : \"\"))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"contactIconsContainer\",\n        className: \"col-1-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }\n      }, profile.phone && !profile.suspended && /*#__PURE__*/React.createElement(CopyToClipboard, {\n        text: profile.phone,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        onClick: function onClick() {\n          return _this2.handlePhoneCall(profile.phone);\n        },\n        className: \"transparentButton verticalCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-phone\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 19\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"contactIconsContainer\",\n        className: \"col-1-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }\n      }, !profile.suspended && /*#__PURE__*/React.createElement(CopyToClipboard, {\n        text: profile.email,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        onClick: function onClick() {\n          _this2.handleContact();\n        },\n        className: \"transparentButton verticalCenter\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: this.getContactIcon(contact),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 19\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"contactIconsContainer\",\n        className: \"col-1-10\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }\n      }, userIsAdmin && !profile.suspended && /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"transparentButton verticalCenter memberOptions\",\n        onClick: this.handleClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-ellipsis-v\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 17\n        }\n      })))));\n    }\n  }]);\n\n  return MemberContact;\n}(React.Component);\n\nexport default withSnackbar(withRouter(withLanguage(MemberContact)));\nMemberContact.propTypes = {\n  member: PropTypes.object,\n  userIsAdmin: PropTypes.bool,\n  groupId: PropTypes.string,\n  handleAddAdmin: PropTypes.func,\n  handleRemoveUser: PropTypes.func,\n  handleRemoveAdmin: PropTypes.func,\n  language: PropTypes.string,\n  history: PropTypes.object,\n  enqueueSnackbar: PropTypes.func\n};","map":{"version":3,"sources":["C:/Users/nucle/Documents/GitHub/Families_Share-platform/client/src/components/MemberContact.js"],"names":["React","PropTypes","axios","withRouter","withSnackbar","CopyToClipboard","path","Texts","withLanguage","Avatar","MemberOptionsModal","Log","MemberContact","state","modalIsOpen","top","right","handleRedirect","suspended","user_id","history","props","push","handleClick","event","setState","clientY","handleModalClose","handleModalOpen","handleAddAdmin","groupId","member","patch","admin","id","then","response","info","catch","error","handleRemoveAdmin","handleRemoveUser","userId","delete","handlePhoneCall","number","enqueueSnackbar","window","isNative","ReactNativeWebView","postMessage","JSON","stringify","action","value","variant","handleContact","contact","contact_option","getContactValue","phone","email","getContactIcon","icon","language","profile","userIsAdmin","texts","memberContact","options","label","removeAdmin","style","handle","addAdmin","removeUser","given_name","family_name","administrator","Component","propTypes","object","bool","string","func"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport axios from \"axios\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { withSnackbar } from \"notistack\";\r\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\r\nimport * as path from \"lodash.get\";\r\nimport Texts from \"../Constants/Texts\";\r\nimport withLanguage from \"./LanguageContext\";\r\nimport Avatar from \"./Avatar\";\r\nimport MemberOptionsModal from \"./OptionsModal\";\r\nimport Log from \"./Log\";\r\n\r\nclass MemberContact extends React.Component {\r\n  state = { modalIsOpen: false, top: \"\", right: \"\" };\r\n\r\n  handleRedirect = (suspended, user_id) => {\r\n    const { history } = this.props;\r\n    if (!suspended) {\r\n      history.push(`/profiles/${user_id}/info`);\r\n    }\r\n  };\r\n\r\n  handleClick = event => {\r\n    this.setState({ modalIsOpen: true, right: \"5%\", top: event.clientY });\r\n  };\r\n\r\n  handleModalClose = () => {\r\n    this.setState({ modalIsOpen: false, top: \"\", right: \"\" });\r\n  };\r\n\r\n  handleModalOpen = () => {\r\n    this.setState({ modalIsOpen: true });\r\n  };\r\n\r\n  handleAddAdmin = () => {\r\n    const { groupId, member, handleAddAdmin } = this.props;\r\n    const patch = { admin: true };\r\n    axios\r\n      .patch(`/api/groups/${groupId}/members`, {\r\n        patch,\r\n        id: member.user_id\r\n      })\r\n      .then(response => {\r\n        handleAddAdmin(member.user_id);\r\n        Log.info(response);\r\n      })\r\n      .catch(error => Log.error(error));\r\n    this.setState({\r\n      modalIsOpen: false\r\n    });\r\n  };\r\n\r\n  handleRemoveAdmin = () => {\r\n    const { groupId, member, handleRemoveAdmin } = this.props;\r\n    const patch = { admin: false };\r\n    axios\r\n      .patch(`/api/groups/${groupId}/members`, {\r\n        patch,\r\n        id: member.user_id\r\n      })\r\n      .then(response => {\r\n        handleRemoveAdmin(member.user_id);\r\n        Log.info(response);\r\n      })\r\n      .catch(error => Log.error(error));\r\n    this.setState({\r\n      modalIsOpen: false\r\n    });\r\n  };\r\n\r\n  handleRemoveUser = () => {\r\n    const { member, handleRemoveUser, groupId } = this.props;\r\n    const userId = member.user_id;\r\n    axios\r\n      .delete(`/api/groups/${groupId}/members/${userId}`)\r\n      .then(response => {\r\n        handleRemoveUser(member.user_id);\r\n        Log.info(response);\r\n      })\r\n      .catch(error => {\r\n        Log.error(error);\r\n      });\r\n    this.setState({\r\n      modalIsOpen: false\r\n    });\r\n  };\r\n\r\n  handlePhoneCall = number => {\r\n    const { enqueueSnackbar } = this.props;\r\n    if (window.isNative) {\r\n      window.ReactNativeWebView.postMessage(\r\n        JSON.stringify({ action: \"phoneCall\", value: number })\r\n      );\r\n    } else {\r\n      enqueueSnackbar(\"Copied number to clipboard\", {\r\n        variant: \"info\"\r\n      });\r\n    }\r\n  };\r\n\r\n  handleContact = () => {\r\n    const {\r\n      member: { contact_option: contact },\r\n      enqueueSnackbar\r\n    } = this.props;\r\n    if (window.isNative) {\r\n      window.ReactNativeWebView.postMessage(\r\n        JSON.stringify({\r\n          action: `send${contact}`,\r\n          value: this.getContactValue()\r\n        })\r\n      );\r\n    } else {\r\n      enqueueSnackbar(\"Copied e-mail to clipboard\", {\r\n        variant: \"info\"\r\n      });\r\n    }\r\n  };\r\n\r\n  getContactValue = () => {\r\n    const {\r\n      member: { contact_option: contact, phone, email }\r\n    } = this.props;\r\n    let value;\r\n    switch (contact) {\r\n      case \"viber\":\r\n      case \"whatsapp\":\r\n        value = phone;\r\n        break;\r\n      case \"email\":\r\n      default:\r\n        value = email;\r\n    }\r\n    return value;\r\n  };\r\n\r\n  getContactIcon = contact => {\r\n    let icon;\r\n    switch (contact) {\r\n      case \"viber\":\r\n        icon = \"fab fa-viber\";\r\n        break;\r\n      case \"whatsapp\":\r\n        icon = \"fab fa-whatsapp\";\r\n        break;\r\n      case \"email\":\r\n      default:\r\n        icon = \"fas fa-envelope\";\r\n    }\r\n    if (window.isNative) {\r\n      return icon;\r\n    }\r\n    return \"fas fa-envelope\";\r\n  };\r\n\r\n  render() {\r\n    const { language, member: profile, userIsAdmin } = this.props;\r\n    const { top, right, modalIsOpen } = this.state;\r\n    const texts = Texts[language].memberContact;\r\n    const { contact_option: contact } = profile;\r\n    const options = [\r\n      profile.admin\r\n        ? {\r\n            label: texts.removeAdmin,\r\n            style: \"optionsModalButton\",\r\n            handle: this.handleRemoveAdmin\r\n          }\r\n        : {\r\n            label: texts.addAdmin,\r\n            style: \"optionsModalButton\",\r\n            handle: this.handleAddAdmin\r\n          },\r\n      {\r\n        label: texts.removeUser,\r\n        style: \"optionsModalButton\",\r\n        handle: this.handleRemoveUser\r\n      }\r\n    ];\r\n    return (\r\n      <React.Fragment>\r\n        <MemberOptionsModal\r\n          position={{ top, right }}\r\n          options={options}\r\n          isOpen={modalIsOpen}\r\n          handleClose={this.handleModalClose}\r\n        />\r\n        <div id=\"contactContainer\" className=\"row no-gutters\">\r\n          <div className=\"col-2-10\">\r\n            <Avatar\r\n              thumbnail={path(profile, [\"image\", \"path\"])}\r\n              route={`/profiles/${profile.user_id}/info`}\r\n              disabled={profile.suspended}\r\n            />\r\n          </div>\r\n          <div className=\"col-5-10\">\r\n            <div\r\n              role=\"button\"\r\n              tabIndex={-42}\r\n              id=\"contactInfoContainer\"\r\n              className=\"center\"\r\n              onClick={() =>\r\n                this.handleRedirect(profile.suspended, profile.user_id)\r\n              }\r\n            >\r\n              <h1>{`${profile.given_name} ${profile.family_name}`}</h1>\r\n              <h2>{profile.admin ? texts.administrator : \"\"}</h2>\r\n            </div>\r\n          </div>\r\n          <div id=\"contactIconsContainer\" className=\"col-1-10\">\r\n            {profile.phone && !profile.suspended && (\r\n              <CopyToClipboard text={profile.phone}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => this.handlePhoneCall(profile.phone)}\r\n                  className=\"transparentButton verticalCenter\"\r\n                >\r\n                  <i className=\"fas fa-phone\" />\r\n                </button>\r\n              </CopyToClipboard>\r\n            )}\r\n          </div>\r\n          <div id=\"contactIconsContainer\" className=\"col-1-10\">\r\n            {!profile.suspended && (\r\n              <CopyToClipboard text={profile.email}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    this.handleContact();\r\n                  }}\r\n                  className=\"transparentButton verticalCenter\"\r\n                >\r\n                  <i className={this.getContactIcon(contact)} />\r\n                </button>\r\n              </CopyToClipboard>\r\n            )}\r\n          </div>\r\n          <div id=\"contactIconsContainer\" className=\"col-1-10\">\r\n            {userIsAdmin && !profile.suspended && (\r\n              <button\r\n                type=\"button\"\r\n                className=\"transparentButton verticalCenter memberOptions\"\r\n                onClick={this.handleClick}\r\n              >\r\n                <i className=\"fas fa-ellipsis-v\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withSnackbar(withRouter(withLanguage(MemberContact)));\r\n\r\nMemberContact.propTypes = {\r\n  member: PropTypes.object,\r\n  userIsAdmin: PropTypes.bool,\r\n  groupId: PropTypes.string,\r\n  handleAddAdmin: PropTypes.func,\r\n  handleRemoveUser: PropTypes.func,\r\n  handleRemoveAdmin: PropTypes.func,\r\n  language: PropTypes.string,\r\n  history: PropTypes.object,\r\n  enqueueSnackbar: PropTypes.func\r\n};\r\n"]},"metadata":{},"sourceType":"module"}